FIRRTL version 1.2.0
circuit Top :
  module RegisterFile :
    input clock : Clock
    input reset : Reset
    output io : { flip write_enable : UInt<1>, flip write_address : UInt<5>, flip write_data : UInt<32>, flip read_address1 : UInt<5>, flip read_address2 : UInt<5>, read_data1 : UInt<32>, read_data2 : UInt<32>, flip debug_read_address : UInt<5>, debug_read_data : UInt<32>} @[common/src/main/scala/riscv/core/RegisterFile.scala 21:14]

    wire _registers_WIRE : UInt<32>[31] @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[0] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[1] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[2] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[3] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[4] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[5] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[6] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[7] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[8] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[9] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[10] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[11] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[12] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[13] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[14] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[15] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[16] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[17] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[18] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[19] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[20] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[21] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[22] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[23] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[24] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[25] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[26] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[27] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[28] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[29] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    _registers_WIRE[30] <= UInt<32>("h0") @[common/src/main/scala/riscv/core/RegisterFile.scala 36:34]
    reg registers : UInt<32>[31], clock with :
      reset => (reset, _registers_WIRE) @[common/src/main/scala/riscv/core/RegisterFile.scala 36:26]
    node _T = asUInt(reset) @[common/src/main/scala/riscv/core/RegisterFile.scala 38:15]
    node _T_1 = eq(_T, UInt<1>("h0")) @[common/src/main/scala/riscv/core/RegisterFile.scala 38:8]
    when _T_1 : @[common/src/main/scala/riscv/core/RegisterFile.scala 38:23]
      node _T_2 = neq(io.write_address, UInt<1>("h0")) @[common/src/main/scala/riscv/core/RegisterFile.scala 39:46]
      node _T_3 = and(io.write_enable, _T_2) @[common/src/main/scala/riscv/core/RegisterFile.scala 39:26]
      when _T_3 : @[common/src/main/scala/riscv/core/RegisterFile.scala 39:55]
        node _T_4 = sub(io.write_address, UInt<1>("h1")) @[common/src/main/scala/riscv/core/RegisterFile.scala 41:34]
        node _T_5 = tail(_T_4, 1) @[common/src/main/scala/riscv/core/RegisterFile.scala 41:34]
        registers[_T_5] <= io.write_data @[common/src/main/scala/riscv/core/RegisterFile.scala 41:41]
    node _io_read_data1_T = eq(io.read_address1, UInt<1>("h0")) @[common/src/main/scala/riscv/core/RegisterFile.scala 46:22]
    node _io_read_data1_T_1 = sub(io.read_address1, UInt<1>("h1")) @[common/src/main/scala/riscv/core/RegisterFile.scala 48:32]
    node _io_read_data1_T_2 = tail(_io_read_data1_T_1, 1) @[common/src/main/scala/riscv/core/RegisterFile.scala 48:32]
    node _io_read_data1_T_3 = mux(_io_read_data1_T, UInt<1>("h0"), registers[_io_read_data1_T_2]) @[common/src/main/scala/riscv/core/RegisterFile.scala 45:23]
    io.read_data1 <= _io_read_data1_T_3 @[common/src/main/scala/riscv/core/RegisterFile.scala 45:17]
    node _io_read_data2_T = eq(io.read_address2, UInt<1>("h0")) @[common/src/main/scala/riscv/core/RegisterFile.scala 52:22]
    node _io_read_data2_T_1 = sub(io.read_address2, UInt<1>("h1")) @[common/src/main/scala/riscv/core/RegisterFile.scala 54:32]
    node _io_read_data2_T_2 = tail(_io_read_data2_T_1, 1) @[common/src/main/scala/riscv/core/RegisterFile.scala 54:32]
    node _io_read_data2_T_3 = mux(_io_read_data2_T, UInt<1>("h0"), registers[_io_read_data2_T_2]) @[common/src/main/scala/riscv/core/RegisterFile.scala 51:23]
    io.read_data2 <= _io_read_data2_T_3 @[common/src/main/scala/riscv/core/RegisterFile.scala 51:17]
    node _io_debug_read_data_T = eq(io.debug_read_address, UInt<1>("h0")) @[common/src/main/scala/riscv/core/RegisterFile.scala 58:27]
    node _io_debug_read_data_T_1 = sub(io.debug_read_address, UInt<1>("h1")) @[common/src/main/scala/riscv/core/RegisterFile.scala 60:37]
    node _io_debug_read_data_T_2 = tail(_io_debug_read_data_T_1, 1) @[common/src/main/scala/riscv/core/RegisterFile.scala 60:37]
    node _io_debug_read_data_T_3 = mux(_io_debug_read_data_T, UInt<1>("h0"), registers[_io_debug_read_data_T_2]) @[common/src/main/scala/riscv/core/RegisterFile.scala 57:28]
    io.debug_read_data <= _io_debug_read_data_T_3 @[common/src/main/scala/riscv/core/RegisterFile.scala 57:22]

  module InstructionFetch :
    input clock : Clock
    input reset : Reset
    output io : { flip jump_flag_id : UInt<1>, flip jump_address_id : UInt<32>, flip interrupt_assert : UInt<1>, flip interrupt_handler_address : UInt<32>, flip instruction_read_data : UInt<32>, flip instruction_valid : UInt<1>, instruction_address : UInt<32>, instruction : UInt<32>} @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 17:14]

    reg pc : UInt<32>, clock with :
      reset => (reset, UInt<32>("h1000")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 30:19]
    node _next_pc_sequential_T = add(pc, UInt<32>("h4")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 47:31]
    node next_pc_sequential = tail(_next_pc_sequential_T, 1) @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 47:31]
    when io.instruction_valid : @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 60:30]
      io.instruction <= io.instruction_read_data @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 61:20]
      node _pc_T = mux(io.jump_flag_id, io.jump_address_id, next_pc_sequential) @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 74:10]
      node _pc_T_1 = mux(io.interrupt_assert, io.interrupt_handler_address, _pc_T) @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 71:14]
      pc <= _pc_T_1 @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 71:8]
    else :
      pc <= pc @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 84:20]
      io.instruction <= UInt<5>("h13") @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 85:20]
    io.instruction_address <= pc @[2-mmio-trap/src/main/scala/riscv/core/InstructionFetch.scala 87:26]

  module InstructionDecode :
    input clock : Clock
    input reset : Reset
    output io : { flip instruction : UInt<32>, regs_reg1_read_address : UInt<5>, regs_reg2_read_address : UInt<5>, ex_immediate : UInt<32>, ex_aluop1_source : UInt<1>, ex_aluop2_source : UInt<1>, memory_read_enable : UInt<1>, memory_write_enable : UInt<1>, wb_reg_write_source : UInt<2>, reg_write_enable : UInt<1>, reg_write_address : UInt<5>, csr_reg_address : UInt<12>, csr_reg_write_enable : UInt<1>} @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 156:14]

    node opcode = bits(io.instruction, 6, 0) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 174:32]
    node funct3 = bits(io.instruction, 14, 12) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 175:32]
    node rs1 = bits(io.instruction, 19, 15) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 176:32]
    node rs2 = bits(io.instruction, 24, 20) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 177:32]
    node rd = bits(io.instruction, 11, 7) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 178:32]
    node isLoad = eq(opcode, UInt<7>("h3")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 180:26]
    node isStore = eq(opcode, UInt<7>("h23")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 181:26]
    node isOpImm = eq(opcode, UInt<7>("h13")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 182:26]
    node isOp = eq(opcode, UInt<7>("h33")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 183:26]
    node isLui = eq(opcode, UInt<7>("h37")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 184:26]
    node isAuipc = eq(opcode, UInt<7>("h17")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 185:26]
    node isJal = eq(opcode, UInt<7>("h6f")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 186:26]
    node isJalr = eq(opcode, UInt<7>("h67")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 187:26]
    node isBranch = eq(opcode, UInt<7>("h63")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 188:26]
    node isMiscMem = eq(opcode, UInt<7>("hf")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 189:26]
    node isSystem = eq(opcode, UInt<7>("h73")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 190:26]
    node _isCsr_T = neq(funct3, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 191:39]
    node isCsr = and(isSystem, _isCsr_T) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 191:28]
    node csrImm = bits(io.instruction, 19, 15) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 193:37]
    node csrImmIsZero = eq(csrImm, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 194:33]
    node csrRs1IsZero = eq(rs1, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 195:30]
    node _csrUsesImmediate_T = bits(funct3, 2, 2) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 196:32]
    node csrUsesImmediate = and(_csrUsesImmediate_T, isCsr) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 196:36]
    node _csrSourceZero_T = and(csrUsesImmediate, csrImmIsZero) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 197:43]
    node _csrSourceZero_T_1 = eq(csrUsesImmediate, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 197:63]
    node _csrSourceZero_T_2 = and(_csrSourceZero_T_1, csrRs1IsZero) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 197:81]
    node csrSourceZero = or(_csrSourceZero_T, _csrSourceZero_T_2) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 197:59]
    node _usesRs1_T = or(isLoad, isStore) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 199:24]
    node _usesRs1_T_1 = or(_usesRs1_T, isOpImm) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 199:35]
    node _usesRs1_T_2 = or(_usesRs1_T_1, isOp) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 199:46]
    node _usesRs1_T_3 = or(_usesRs1_T_2, isBranch) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 199:54]
    node _usesRs1_T_4 = or(_usesRs1_T_3, isJalr) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 199:66]
    node _usesRs1_T_5 = eq(csrUsesImmediate, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 199:89]
    node _usesRs1_T_6 = and(isCsr, _usesRs1_T_5) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 199:86]
    node usesRs1 = or(_usesRs1_T_4, _usesRs1_T_6) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 199:76]
    node _usesRs2_T = or(isStore, isOp) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 200:25]
    node usesRs2 = or(_usesRs2_T, isBranch) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 200:33]
    node _regWrite_T = or(isLoad, isOpImm) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:26]
    node _regWrite_T_1 = or(_regWrite_T, isOp) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:37]
    node _regWrite_T_2 = or(_regWrite_T_1, isLui) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:45]
    node _regWrite_T_3 = or(_regWrite_T_2, isAuipc) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:54]
    node _regWrite_T_4 = or(_regWrite_T_3, isJal) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:65]
    node _regWrite_T_5 = or(_regWrite_T_4, isJalr) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:74]
    node _regWrite_T_6 = or(_regWrite_T_5, isCsr) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:84]
    node _regWrite_T_7 = neq(rd, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:101]
    node regWrite = and(_regWrite_T_6, _regWrite_T_7) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 202:94]
    wire wbSource : UInt<2> @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 219:29]
    wbSource <= UInt<2>("h0") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 219:29]
    when isLoad : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 221:16]
      wbSource <= UInt<2>("h1") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 222:14]
    else :
      when isCsr : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 225:20]
        wbSource <= UInt<2>("h2") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 226:14]
      else :
        node _T = or(isJal, isJalr) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 229:19]
        when _T : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 229:30]
          wbSource <= UInt<2>("h3") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 230:14]
    wire aluOp1Sel : UInt<1> @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 237:30]
    aluOp1Sel <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 237:30]
    node _T_1 = or(isBranch, isAuipc) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 240:17]
    node _T_2 = or(_T_1, isJal) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 240:28]
    when _T_2 : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 240:38]
      aluOp1Sel <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 241:15]
    node _needsImmediate_T = or(isLoad, isStore) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 248:12]
    node _needsImmediate_T_1 = or(_needsImmediate_T, isOpImm) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 248:23]
    node _needsImmediate_T_2 = or(_needsImmediate_T_1, isBranch) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 248:34]
    node _needsImmediate_T_3 = or(_needsImmediate_T_2, isLui) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 248:46]
    node _needsImmediate_T_4 = or(_needsImmediate_T_3, isAuipc) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 248:55]
    node _needsImmediate_T_5 = or(_needsImmediate_T_4, isJal) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 248:66]
    node needsImmediate = or(_needsImmediate_T_5, isJalr) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 248:75]
    wire aluOp2Sel : UInt<1> @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 249:30]
    aluOp2Sel <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 249:30]
    when needsImmediate : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 252:24]
      aluOp2Sel <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 253:15]
    wire immKind : UInt<3> @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 256:28]
    immKind <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 256:28]
    node _T_3 = or(isLoad, isOpImm) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 257:15]
    node _T_4 = or(_T_3, isJalr) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 257:26]
    when _T_4 : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 257:37]
      immKind <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 258:13]
    when isStore : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 260:17]
      immKind <= UInt<2>("h2") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 261:13]
    when isBranch : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 263:18]
      immKind <= UInt<2>("h3") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 264:13]
    node _T_5 = or(isLui, isAuipc) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 266:14]
    when _T_5 : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 266:26]
      immKind <= UInt<3>("h4") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 267:13]
    when isJal : @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 269:15]
      immKind <= UInt<3>("h5") @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 270:13]
    node _io_regs_reg1_read_address_T = mux(usesRs1, rs1, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 273:35]
    io.regs_reg1_read_address <= _io_regs_reg1_read_address_T @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 273:29]
    node _io_regs_reg2_read_address_T = mux(usesRs2, rs2, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 274:35]
    io.regs_reg2_read_address <= _io_regs_reg2_read_address_T @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 274:29]
    io.ex_aluop1_source <= aluOp1Sel @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 275:29]
    io.ex_aluop2_source <= aluOp2Sel @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 276:29]
    io.memory_read_enable <= isLoad @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 277:29]
    io.memory_write_enable <= isStore @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 278:29]
    io.wb_reg_write_source <= wbSource @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 279:29]
    io.reg_write_enable <= regWrite @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 280:29]
    io.reg_write_address <= rd @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 281:29]
    node _io_csr_reg_address_T = bits(io.instruction, 31, 20) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 283:36]
    io.csr_reg_address <= _io_csr_reg_address_T @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 283:22]
    node _csrWrites_T = eq(funct3, UInt<3>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 285:13]
    node _csrWrites_T_1 = eq(funct3, UInt<3>("h5")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 286:15]
    node _csrWrites_T_2 = or(_csrWrites_T, _csrWrites_T_1) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 285:44]
    node _csrWrites_T_3 = eq(csrSourceZero, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 287:8]
    node _csrWrites_T_4 = eq(funct3, UInt<3>("h2")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 287:34]
    node _csrWrites_T_5 = eq(funct3, UInt<3>("h3")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 288:16]
    node _csrWrites_T_6 = or(_csrWrites_T_4, _csrWrites_T_5) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 287:64]
    node _csrWrites_T_7 = eq(funct3, UInt<3>("h6")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 289:16]
    node _csrWrites_T_8 = or(_csrWrites_T_6, _csrWrites_T_7) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 288:46]
    node _csrWrites_T_9 = eq(funct3, UInt<3>("h7")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 290:16]
    node _csrWrites_T_10 = or(_csrWrites_T_8, _csrWrites_T_9) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 289:47]
    node _csrWrites_T_11 = and(_csrWrites_T_3, _csrWrites_T_10) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 287:23]
    node _csrWrites_T_12 = or(_csrWrites_T_2, _csrWrites_T_11) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 286:47]
    node csrWrites = and(isCsr, _csrWrites_T_12) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 284:25]
    io.csr_reg_write_enable <= csrWrites @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 292:27]
    node _immI_T = bits(io.instruction, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 306:47]
    node _immI_T_1 = mux(_immI_T, UInt<20>("hfffff"), UInt<20>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 306:9]
    node _immI_T_2 = bits(io.instruction, 31, 20) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 307:16]
    node immI = cat(_immI_T_1, _immI_T_2) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 305:17]
    node _immS_T = bits(io.instruction, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 317:47]
    node _immS_T_1 = mux(_immS_T, UInt<20>("hfffff"), UInt<20>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 317:9]
    node _immS_T_2 = bits(io.instruction, 31, 25) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 318:16]
    node _immS_T_3 = bits(io.instruction, 11, 7) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 319:16]
    node immS_hi = cat(_immS_T_1, _immS_T_2) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 316:17]
    node immS = cat(immS_hi, _immS_T_3) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 316:17]
    node _immB_T = bits(io.instruction, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 330:47]
    node _immB_T_1 = mux(_immB_T, UInt<19>("h7ffff"), UInt<19>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 330:9]
    node _immB_T_2 = bits(io.instruction, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 331:16]
    node _immB_T_3 = bits(io.instruction, 7, 7) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 332:16]
    node _immB_T_4 = bits(io.instruction, 30, 25) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 333:16]
    node _immB_T_5 = bits(io.instruction, 11, 8) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 334:16]
    node immB_lo_hi = cat(_immB_T_4, _immB_T_5) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 329:17]
    node immB_lo = cat(immB_lo_hi, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 329:17]
    node immB_hi_hi = cat(_immB_T_1, _immB_T_2) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 329:17]
    node immB_hi = cat(immB_hi_hi, _immB_T_3) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 329:17]
    node immB = cat(immB_hi, immB_lo) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 329:17]
    node _immU_T = bits(io.instruction, 31, 12) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 342:29]
    node immU = cat(_immU_T, UInt<12>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 342:17]
    node _immJ_T = bits(io.instruction, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 352:47]
    node _immJ_T_1 = mux(_immJ_T, UInt<11>("h7ff"), UInt<11>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 352:9]
    node _immJ_T_2 = bits(io.instruction, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 353:16]
    node _immJ_T_3 = bits(io.instruction, 19, 12) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 354:16]
    node _immJ_T_4 = bits(io.instruction, 20, 20) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 355:16]
    node _immJ_T_5 = bits(io.instruction, 30, 21) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 356:16]
    node immJ_lo_hi = cat(_immJ_T_4, _immJ_T_5) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 351:17]
    node immJ_lo = cat(immJ_lo_hi, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 351:17]
    node immJ_hi_hi = cat(_immJ_T_1, _immJ_T_2) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 351:17]
    node immJ_hi = cat(immJ_hi_hi, _immJ_T_3) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 351:17]
    node immJ = cat(immJ_hi, immJ_lo) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 351:17]
    node _immediate_T = asUInt(immKind) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:37]
    node _immediate_T_1 = asUInt(UInt<1>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 362:23]
    node _immediate_T_2 = asUInt(UInt<2>("h2")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 363:23]
    node _immediate_T_3 = asUInt(UInt<2>("h3")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 364:23]
    node _immediate_T_4 = asUInt(UInt<3>("h4")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 365:23]
    node _immediate_T_5 = asUInt(UInt<3>("h5")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 366:23]
    node _immediate_T_6 = eq(_immediate_T_1, _immediate_T) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node _immediate_T_7 = mux(_immediate_T_6, immI, UInt<32>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node _immediate_T_8 = eq(_immediate_T_2, _immediate_T) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node _immediate_T_9 = mux(_immediate_T_8, immS, _immediate_T_7) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node _immediate_T_10 = eq(_immediate_T_3, _immediate_T) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node _immediate_T_11 = mux(_immediate_T_10, immB, _immediate_T_9) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node _immediate_T_12 = eq(_immediate_T_4, _immediate_T) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node _immediate_T_13 = mux(_immediate_T_12, immU, _immediate_T_11) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node _immediate_T_14 = eq(_immediate_T_5, _immediate_T) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    node immediate = mux(_immediate_T_14, immJ, _immediate_T_13) @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 360:72]
    io.ex_immediate <= immediate @[2-mmio-trap/src/main/scala/riscv/core/InstructionDecode.scala 369:19]

  module ALU :
    input clock : Clock
    input reset : Reset
    output io : { flip func : UInt<4>, flip op1 : UInt<32>, flip op2 : UInt<32>, result : UInt<32>} @[common/src/main/scala/riscv/core/ALU.scala 27:14]

    io.result <= UInt<1>("h0") @[common/src/main/scala/riscv/core/ALU.scala 36:13]
    node _T = asUInt(UInt<1>("h1")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
    node _T_1 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
    node _T_2 = eq(_T, _T_1) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
    when _T_2 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
      node _io_result_T = add(io.op1, io.op2) @[common/src/main/scala/riscv/core/ALU.scala 39:27]
      node _io_result_T_1 = tail(_io_result_T, 1) @[common/src/main/scala/riscv/core/ALU.scala 39:27]
      io.result <= _io_result_T_1 @[common/src/main/scala/riscv/core/ALU.scala 39:17]
    else :
      node _T_3 = asUInt(UInt<2>("h2")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
      node _T_4 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
      node _T_5 = eq(_T_3, _T_4) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
      when _T_5 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
        node _io_result_T_2 = sub(io.op1, io.op2) @[common/src/main/scala/riscv/core/ALU.scala 42:27]
        node _io_result_T_3 = tail(_io_result_T_2, 1) @[common/src/main/scala/riscv/core/ALU.scala 42:27]
        io.result <= _io_result_T_3 @[common/src/main/scala/riscv/core/ALU.scala 42:17]
      else :
        node _T_6 = asUInt(UInt<2>("h3")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
        node _T_7 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
        node _T_8 = eq(_T_6, _T_7) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
        when _T_8 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
          node _io_result_T_4 = bits(io.op2, 4, 0) @[common/src/main/scala/riscv/core/ALU.scala 45:36]
          node _io_result_T_5 = dshl(io.op1, _io_result_T_4) @[common/src/main/scala/riscv/core/ALU.scala 45:27]
          io.result <= _io_result_T_5 @[common/src/main/scala/riscv/core/ALU.scala 45:17]
        else :
          node _T_9 = asUInt(UInt<3>("h4")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
          node _T_10 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
          node _T_11 = eq(_T_9, _T_10) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
          when _T_11 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
            node _io_result_T_6 = asSInt(io.op1) @[common/src/main/scala/riscv/core/ALU.scala 48:27]
            node _io_result_T_7 = asSInt(io.op2) @[common/src/main/scala/riscv/core/ALU.scala 48:43]
            node _io_result_T_8 = lt(_io_result_T_6, _io_result_T_7) @[common/src/main/scala/riscv/core/ALU.scala 48:34]
            io.result <= _io_result_T_8 @[common/src/main/scala/riscv/core/ALU.scala 48:17]
          else :
            node _T_12 = asUInt(UInt<3>("h5")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
            node _T_13 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
            node _T_14 = eq(_T_12, _T_13) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
            when _T_14 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
              node _io_result_T_9 = xor(io.op1, io.op2) @[common/src/main/scala/riscv/core/ALU.scala 51:27]
              io.result <= _io_result_T_9 @[common/src/main/scala/riscv/core/ALU.scala 51:17]
            else :
              node _T_15 = asUInt(UInt<3>("h6")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
              node _T_16 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
              node _T_17 = eq(_T_15, _T_16) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
              when _T_17 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                node _io_result_T_10 = or(io.op1, io.op2) @[common/src/main/scala/riscv/core/ALU.scala 54:27]
                io.result <= _io_result_T_10 @[common/src/main/scala/riscv/core/ALU.scala 54:17]
              else :
                node _T_18 = asUInt(UInt<3>("h7")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                node _T_19 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                node _T_20 = eq(_T_18, _T_19) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                when _T_20 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                  node _io_result_T_11 = and(io.op1, io.op2) @[common/src/main/scala/riscv/core/ALU.scala 57:27]
                  io.result <= _io_result_T_11 @[common/src/main/scala/riscv/core/ALU.scala 57:17]
                else :
                  node _T_21 = asUInt(UInt<4>("h8")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                  node _T_22 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                  node _T_23 = eq(_T_21, _T_22) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                  when _T_23 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                    node _io_result_T_12 = bits(io.op2, 4, 0) @[common/src/main/scala/riscv/core/ALU.scala 60:36]
                    node _io_result_T_13 = dshr(io.op1, _io_result_T_12) @[common/src/main/scala/riscv/core/ALU.scala 60:27]
                    io.result <= _io_result_T_13 @[common/src/main/scala/riscv/core/ALU.scala 60:17]
                  else :
                    node _T_24 = asUInt(UInt<4>("h9")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                    node _T_25 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                    node _T_26 = eq(_T_24, _T_25) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                    when _T_26 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                      node _io_result_T_14 = asSInt(io.op1) @[common/src/main/scala/riscv/core/ALU.scala 63:28]
                      node _io_result_T_15 = bits(io.op2, 4, 0) @[common/src/main/scala/riscv/core/ALU.scala 63:44]
                      node _io_result_T_16 = dshr(_io_result_T_14, _io_result_T_15) @[common/src/main/scala/riscv/core/ALU.scala 63:35]
                      node _io_result_T_17 = asUInt(_io_result_T_16) @[common/src/main/scala/riscv/core/ALU.scala 63:52]
                      io.result <= _io_result_T_17 @[common/src/main/scala/riscv/core/ALU.scala 63:17]
                    else :
                      node _T_27 = asUInt(UInt<4>("ha")) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                      node _T_28 = asUInt(io.func) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                      node _T_29 = eq(_T_27, _T_28) @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                      when _T_29 : @[common/src/main/scala/riscv/core/ALU.scala 37:19]
                        node _io_result_T_18 = lt(io.op1, io.op2) @[common/src/main/scala/riscv/core/ALU.scala 66:27]
                        io.result <= _io_result_T_18 @[common/src/main/scala/riscv/core/ALU.scala 66:17]


  module ALUControl :
    input clock : Clock
    input reset : Reset
    output io : { flip opcode : UInt<7>, flip funct3 : UInt<3>, flip funct7 : UInt<7>, alu_funct : UInt<4>} @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 21:14]

    node funct7_5 = bits(io.funct7, 5, 5) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 43:27]
    io.alu_funct <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 46:16]
    node _T = eq(UInt<7>("h13"), io.opcode) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 48:21]
    when _T : @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 48:21]
      node _io_alu_funct_T = mux(funct7_5, UInt<4>("h9"), UInt<4>("h8")) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 69:41]
      node _io_alu_funct_T_1 = eq(UInt<3>("h1"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_2 = mux(_io_alu_funct_T_1, UInt<2>("h3"), UInt<1>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_3 = eq(UInt<3>("h2"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_4 = mux(_io_alu_funct_T_3, UInt<3>("h4"), _io_alu_funct_T_2) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_5 = eq(UInt<3>("h3"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_6 = mux(_io_alu_funct_T_5, UInt<4>("ha"), _io_alu_funct_T_4) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_7 = eq(UInt<3>("h4"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_8 = mux(_io_alu_funct_T_7, UInt<3>("h5"), _io_alu_funct_T_6) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_9 = eq(UInt<3>("h6"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_10 = mux(_io_alu_funct_T_9, UInt<3>("h6"), _io_alu_funct_T_8) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_11 = eq(UInt<3>("h7"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_12 = mux(_io_alu_funct_T_11, UInt<3>("h7"), _io_alu_funct_T_10) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_13 = eq(UInt<3>("h5"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      node _io_alu_funct_T_14 = mux(_io_alu_funct_T_13, _io_alu_funct_T, _io_alu_funct_T_12) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:62]
      io.alu_funct <= _io_alu_funct_T_14 @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 51:20]
    else :
      node _T_1 = eq(UInt<7>("h33"), io.opcode) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 48:21]
      when _T_1 : @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 48:21]
        node _io_alu_funct_T_15 = mux(funct7_5, UInt<2>("h2"), UInt<1>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 82:43]
        node _io_alu_funct_T_16 = mux(funct7_5, UInt<4>("h9"), UInt<4>("h8")) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 97:43]
        node _io_alu_funct_T_17 = eq(UInt<3>("h1"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_18 = mux(_io_alu_funct_T_17, UInt<2>("h3"), _io_alu_funct_T_15) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_19 = eq(UInt<3>("h2"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_20 = mux(_io_alu_funct_T_19, UInt<3>("h4"), _io_alu_funct_T_18) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_21 = eq(UInt<3>("h3"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_22 = mux(_io_alu_funct_T_21, UInt<4>("ha"), _io_alu_funct_T_20) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_23 = eq(UInt<3>("h4"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_24 = mux(_io_alu_funct_T_23, UInt<3>("h5"), _io_alu_funct_T_22) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_25 = eq(UInt<3>("h6"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_26 = mux(_io_alu_funct_T_25, UInt<3>("h6"), _io_alu_funct_T_24) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_27 = eq(UInt<3>("h7"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_28 = mux(_io_alu_funct_T_27, UInt<3>("h7"), _io_alu_funct_T_26) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_29 = eq(UInt<3>("h5"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        node _io_alu_funct_T_30 = mux(_io_alu_funct_T_29, _io_alu_funct_T_16, _io_alu_funct_T_28) @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:62]
        io.alu_funct <= _io_alu_funct_T_30 @[2-mmio-trap/src/main/scala/riscv/core/ALUControl.scala 76:20]


  module Execute :
    input clock : Clock
    input reset : Reset
    output io : { flip instruction : UInt<32>, flip instruction_address : UInt<32>, flip reg1_data : UInt<32>, flip reg2_data : UInt<32>, flip immediate : UInt<32>, flip aluop1_source : UInt<1>, flip aluop2_source : UInt<1>, flip csr_reg_read_data : UInt<32>, mem_alu_result : UInt<32>, csr_reg_write_data : UInt<32>, if_jump_flag : UInt<1>, if_jump_address : UInt<32>} @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 55:14]

    node opcode = bits(io.instruction, 6, 0) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 72:30]
    node funct3 = bits(io.instruction, 14, 12) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 73:30]
    inst alu of ALU @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 76:24]
    alu.clock <= clock
    alu.reset <= reset
    inst alu_ctrl of ALUControl @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 77:24]
    alu_ctrl.clock <= clock
    alu_ctrl.reset <= reset
    alu_ctrl.io.opcode <= opcode @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 79:22]
    alu_ctrl.io.funct3 <= funct3 @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 80:22]
    node _alu_ctrl_io_funct7_T = bits(io.instruction, 31, 25) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 81:39]
    alu_ctrl.io.funct7 <= _alu_ctrl_io_funct7_T @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 81:22]
    node reg1_s = asSInt(io.reg1_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 91:29]
    node reg2_s = asSInt(io.reg2_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 92:29]
    alu.io.func <= alu_ctrl.io.alu_funct @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 96:15]
    node _aluOp1_T = eq(io.aluop1_source, UInt<1>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 97:37]
    node aluOp1 = mux(_aluOp1_T, io.instruction_address, io.reg1_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 97:19]
    node _aluOp2_T = eq(io.aluop2_source, UInt<1>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 98:37]
    node aluOp2 = mux(_aluOp2_T, io.immediate, io.reg2_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 98:19]
    alu.io.op1 <= aluOp1 @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 99:14]
    alu.io.op2 <= aluOp2 @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 100:14]
    io.mem_alu_result <= alu.io.result @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 102:21]
    node _csrSourceImmediate_T = bits(io.instruction, 19, 15) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 105:80]
    node csrSourceImmediate = cat(UInt<27>("h0"), _csrSourceImmediate_T) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 105:31]
    node _csrSource_T = bits(funct3, 2, 2) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 106:38]
    node csrSource = mux(_csrSource_T, csrSourceImmediate, io.reg1_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 106:31]
    node _csrResult_T = or(io.csr_reg_read_data, csrSource) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 111:59]
    node _csrResult_T_1 = or(io.csr_reg_read_data, csrSource) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 112:59]
    node _csrResult_T_2 = not(csrSource) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 113:62]
    node _csrResult_T_3 = and(io.csr_reg_read_data, _csrResult_T_2) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 113:59]
    node _csrResult_T_4 = not(csrSource) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 114:62]
    node _csrResult_T_5 = and(io.csr_reg_read_data, _csrResult_T_4) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 114:59]
    node _csrResult_T_6 = eq(UInt<3>("h1"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_7 = mux(_csrResult_T_6, csrSource, csrSource) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_8 = eq(UInt<3>("h5"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_9 = mux(_csrResult_T_8, csrSource, _csrResult_T_7) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_10 = eq(UInt<3>("h2"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_11 = mux(_csrResult_T_10, _csrResult_T, _csrResult_T_9) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_12 = eq(UInt<3>("h6"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_13 = mux(_csrResult_T_12, _csrResult_T_1, _csrResult_T_11) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_14 = eq(UInt<3>("h3"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_15 = mux(_csrResult_T_14, _csrResult_T_3, _csrResult_T_13) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node _csrResult_T_16 = eq(UInt<3>("h7"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    node csrResult = mux(_csrResult_T_16, _csrResult_T_5, _csrResult_T_15) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 107:47]
    io.csr_reg_write_data <= csrResult @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 117:25]
    node _branchCondition_T = eq(io.reg1_data, io.reg2_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 133:41]
    node _branchCondition_T_1 = neq(io.reg1_data, io.reg2_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 134:41]
    node _branchCondition_T_2 = lt(reg1_s, reg2_s) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 137:41]
    node _branchCondition_T_3 = geq(reg1_s, reg2_s) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 138:41]
    node _branchCondition_T_4 = lt(io.reg1_data, io.reg2_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 141:41]
    node _branchCondition_T_5 = geq(io.reg1_data, io.reg2_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 142:41]
    node _branchCondition_T_6 = eq(UInt<3>("h0"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_7 = mux(_branchCondition_T_6, _branchCondition_T, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_8 = eq(UInt<3>("h1"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_9 = mux(_branchCondition_T_8, _branchCondition_T_1, _branchCondition_T_7) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_10 = eq(UInt<3>("h4"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_11 = mux(_branchCondition_T_10, _branchCondition_T_2, _branchCondition_T_9) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_12 = eq(UInt<3>("h5"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_13 = mux(_branchCondition_T_12, _branchCondition_T_3, _branchCondition_T_11) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_14 = eq(UInt<3>("h6"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_15 = mux(_branchCondition_T_14, _branchCondition_T_4, _branchCondition_T_13) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node _branchCondition_T_16 = eq(UInt<3>("h7"), funct3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node branchCondition = mux(_branchCondition_T_16, _branchCondition_T_5, _branchCondition_T_15) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 128:51]
    node isBranch = eq(opcode, UInt<7>("h63")) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 145:25]
    node isJal = eq(opcode, UInt<7>("h6f")) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 146:25]
    node isJalr = eq(opcode, UInt<7>("h67")) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 147:25]
    node _branchTarget_T = asSInt(io.instruction_address) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 160:46]
    node _branchTarget_T_1 = asSInt(io.immediate) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 160:68]
    node _branchTarget_T_2 = add(_branchTarget_T, _branchTarget_T_1) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 160:53]
    node _branchTarget_T_3 = tail(_branchTarget_T_2, 1) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 160:53]
    node _branchTarget_T_4 = asSInt(_branchTarget_T_3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 160:53]
    node branchTarget = asUInt(_branchTarget_T_4) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 160:76]
    node _jalrSum_T = asSInt(io.reg1_data) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 167:36]
    node _jalrSum_T_1 = asSInt(io.immediate) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 167:58]
    node _jalrSum_T_2 = add(_jalrSum_T, _jalrSum_T_1) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 167:43]
    node _jalrSum_T_3 = tail(_jalrSum_T_2, 1) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 167:43]
    node _jalrSum_T_4 = asSInt(_jalrSum_T_3) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 167:43]
    node jalrSum = asUInt(_jalrSum_T_4) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 167:66]
    node _jalrTarget_T = bits(jalrSum, 31, 1) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 172:33]
    node jalrTarget = cat(_jalrTarget_T, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 172:25]
    node branchTaken = and(isBranch, branchCondition) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 174:30]
    node _io_if_jump_flag_T = or(branchTaken, isJal) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 175:37]
    node _io_if_jump_flag_T_1 = or(_io_if_jump_flag_T, isJalr) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 175:46]
    io.if_jump_flag <= _io_if_jump_flag_T_1 @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 175:22]
    node _io_if_jump_address_T = mux(isJal, branchTarget, branchTarget) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 176:52]
    node _io_if_jump_address_T_1 = mux(isJalr, jalrTarget, _io_if_jump_address_T) @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 176:28]
    io.if_jump_address <= _io_if_jump_address_T_1 @[2-mmio-trap/src/main/scala/riscv/core/Execute.scala 176:22]

  module MemoryAccess :
    input clock : Clock
    input reset : Reset
    output io : { flip alu_result : UInt<32>, flip reg2_data : UInt<32>, flip memory_read_enable : UInt<1>, flip memory_write_enable : UInt<1>, flip funct3 : UInt<3>, wb_memory_read_data : UInt<32>, flip memory_bundle : { flip address : UInt<32>, flip write_data : UInt<32>, flip write_enable : UInt<1>, flip write_strobe : UInt<1>[4], read_data : UInt<32>}} @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 14:14]

    node mem_address_index = bits(io.alu_result, 1, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 25:40]
    io.memory_bundle.write_enable <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 27:33]
    io.memory_bundle.write_data <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 28:33]
    io.memory_bundle.address <= io.alu_result @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 29:33]
    wire _WIRE : UInt<1>[4] @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 30:43]
    _WIRE[0] <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 30:43]
    _WIRE[1] <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 30:43]
    _WIRE[2] <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 30:43]
    _WIRE[3] <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 30:43]
    io.memory_bundle.write_strobe <= _WIRE @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 30:33]
    io.wb_memory_read_data <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 31:33]
    when io.memory_read_enable : @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 36:31]
      wire bytes : UInt<8>[4] @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 39:21]
      node _bytes_0_T = bits(io.memory_bundle.read_data, 7, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 41:23]
      bytes[0] <= _bytes_0_T @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 41:16]
      node _bytes_1_T = bits(io.memory_bundle.read_data, 15, 8) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 41:23]
      bytes[1] <= _bytes_1_T @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 41:16]
      node _bytes_2_T = bits(io.memory_bundle.read_data, 23, 16) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 41:23]
      bytes[2] <= _bytes_2_T @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 41:16]
      node _bytes_3_T = bits(io.memory_bundle.read_data, 31, 24) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 41:23]
      bytes[3] <= _bytes_3_T @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 41:16]
      node _half_T = bits(mem_address_index, 1, 1) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 46:37]
      node _half_T_1 = cat(bytes[3], bytes[2]) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 46:45]
      node _half_T_2 = cat(bytes[1], bytes[0]) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 46:70]
      node half = mux(_half_T, _half_T_1, _half_T_2) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 46:19]
      node _io_wb_memory_read_data_T = bits(io.memory_bundle.read_data, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:79]
      node _io_wb_memory_read_data_T_1 = mux(_io_wb_memory_read_data_T, UInt<24>("hffffff"), UInt<24>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:70]
      node _io_wb_memory_read_data_T_2 = bits(io.memory_bundle.read_data, 31, 24) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:90]
      node _io_wb_memory_read_data_T_3 = cat(_io_wb_memory_read_data_T_1, _io_wb_memory_read_data_T_2) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:65]
      node _io_wb_memory_read_data_T_4 = bits(io.memory_bundle.read_data, 7, 7) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 56:37]
      node _io_wb_memory_read_data_T_5 = mux(_io_wb_memory_read_data_T_4, UInt<24>("hffffff"), UInt<24>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 56:28]
      node _io_wb_memory_read_data_T_6 = bits(io.memory_bundle.read_data, 7, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 56:47]
      node _io_wb_memory_read_data_T_7 = cat(_io_wb_memory_read_data_T_5, _io_wb_memory_read_data_T_6) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 56:23]
      node _io_wb_memory_read_data_T_8 = bits(io.memory_bundle.read_data, 15, 15) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 57:37]
      node _io_wb_memory_read_data_T_9 = mux(_io_wb_memory_read_data_T_8, UInt<24>("hffffff"), UInt<24>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 57:28]
      node _io_wb_memory_read_data_T_10 = bits(io.memory_bundle.read_data, 15, 8) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 57:48]
      node _io_wb_memory_read_data_T_11 = cat(_io_wb_memory_read_data_T_9, _io_wb_memory_read_data_T_10) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 57:23]
      node _io_wb_memory_read_data_T_12 = bits(io.memory_bundle.read_data, 23, 23) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 58:37]
      node _io_wb_memory_read_data_T_13 = mux(_io_wb_memory_read_data_T_12, UInt<24>("hffffff"), UInt<24>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 58:28]
      node _io_wb_memory_read_data_T_14 = bits(io.memory_bundle.read_data, 23, 16) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 58:48]
      node _io_wb_memory_read_data_T_15 = cat(_io_wb_memory_read_data_T_13, _io_wb_memory_read_data_T_14) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 58:23]
      node _io_wb_memory_read_data_T_16 = bits(io.memory_bundle.read_data, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 59:37]
      node _io_wb_memory_read_data_T_17 = mux(_io_wb_memory_read_data_T_16, UInt<24>("hffffff"), UInt<24>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 59:28]
      node _io_wb_memory_read_data_T_18 = bits(io.memory_bundle.read_data, 31, 24) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 59:48]
      node _io_wb_memory_read_data_T_19 = cat(_io_wb_memory_read_data_T_17, _io_wb_memory_read_data_T_18) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 59:23]
      node _io_wb_memory_read_data_T_20 = eq(UInt<1>("h1"), mem_address_index) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:100]
      node _io_wb_memory_read_data_T_21 = mux(_io_wb_memory_read_data_T_20, _io_wb_memory_read_data_T_11, _io_wb_memory_read_data_T_7) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:100]
      node _io_wb_memory_read_data_T_22 = eq(UInt<2>("h2"), mem_address_index) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:100]
      node _io_wb_memory_read_data_T_23 = mux(_io_wb_memory_read_data_T_22, _io_wb_memory_read_data_T_15, _io_wb_memory_read_data_T_21) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:100]
      node _io_wb_memory_read_data_T_24 = eq(UInt<2>("h3"), mem_address_index) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:100]
      node _io_wb_memory_read_data_T_25 = mux(_io_wb_memory_read_data_T_24, _io_wb_memory_read_data_T_19, _io_wb_memory_read_data_T_23) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 54:100]
      node _io_wb_memory_read_data_T_26 = bits(io.memory_bundle.read_data, 31, 24) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 66:82]
      node _io_wb_memory_read_data_T_27 = cat(UInt<24>("h0"), _io_wb_memory_read_data_T_26) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 66:66]
      node _io_wb_memory_read_data_T_28 = bits(io.memory_bundle.read_data, 7, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 68:39]
      node _io_wb_memory_read_data_T_29 = cat(UInt<24>("h0"), _io_wb_memory_read_data_T_28) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 68:23]
      node _io_wb_memory_read_data_T_30 = bits(io.memory_bundle.read_data, 15, 8) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 69:39]
      node _io_wb_memory_read_data_T_31 = cat(UInt<24>("h0"), _io_wb_memory_read_data_T_30) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 69:23]
      node _io_wb_memory_read_data_T_32 = bits(io.memory_bundle.read_data, 23, 16) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 70:39]
      node _io_wb_memory_read_data_T_33 = cat(UInt<24>("h0"), _io_wb_memory_read_data_T_32) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 70:23]
      node _io_wb_memory_read_data_T_34 = bits(io.memory_bundle.read_data, 31, 24) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 71:39]
      node _io_wb_memory_read_data_T_35 = cat(UInt<24>("h0"), _io_wb_memory_read_data_T_34) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 71:23]
      node _io_wb_memory_read_data_T_36 = eq(UInt<1>("h1"), mem_address_index) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 66:92]
      node _io_wb_memory_read_data_T_37 = mux(_io_wb_memory_read_data_T_36, _io_wb_memory_read_data_T_31, _io_wb_memory_read_data_T_29) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 66:92]
      node _io_wb_memory_read_data_T_38 = eq(UInt<2>("h2"), mem_address_index) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 66:92]
      node _io_wb_memory_read_data_T_39 = mux(_io_wb_memory_read_data_T_38, _io_wb_memory_read_data_T_33, _io_wb_memory_read_data_T_37) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 66:92]
      node _io_wb_memory_read_data_T_40 = eq(UInt<2>("h3"), mem_address_index) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 66:92]
      node _io_wb_memory_read_data_T_41 = mux(_io_wb_memory_read_data_T_40, _io_wb_memory_read_data_T_35, _io_wb_memory_read_data_T_39) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 66:92]
      node _io_wb_memory_read_data_T_42 = bits(mem_address_index, 1, 1) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 77:28]
      node _io_wb_memory_read_data_T_43 = eq(_io_wb_memory_read_data_T_42, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 77:32]
      node _io_wb_memory_read_data_T_44 = bits(io.memory_bundle.read_data, 15, 15) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 78:28]
      node _io_wb_memory_read_data_T_45 = mux(_io_wb_memory_read_data_T_44, UInt<16>("hffff"), UInt<16>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 78:19]
      node _io_wb_memory_read_data_T_46 = bits(io.memory_bundle.read_data, 15, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 78:39]
      node _io_wb_memory_read_data_T_47 = cat(_io_wb_memory_read_data_T_45, _io_wb_memory_read_data_T_46) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 78:14]
      node _io_wb_memory_read_data_T_48 = bits(io.memory_bundle.read_data, 31, 31) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 79:28]
      node _io_wb_memory_read_data_T_49 = mux(_io_wb_memory_read_data_T_48, UInt<16>("hffff"), UInt<16>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 79:19]
      node _io_wb_memory_read_data_T_50 = bits(io.memory_bundle.read_data, 31, 16) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 79:39]
      node _io_wb_memory_read_data_T_51 = cat(_io_wb_memory_read_data_T_49, _io_wb_memory_read_data_T_50) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 79:14]
      node _io_wb_memory_read_data_T_52 = mux(_io_wb_memory_read_data_T_43, _io_wb_memory_read_data_T_47, _io_wb_memory_read_data_T_51) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 76:36]
      node _io_wb_memory_read_data_T_53 = bits(mem_address_index, 1, 1) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 84:28]
      node _io_wb_memory_read_data_T_54 = eq(_io_wb_memory_read_data_T_53, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 84:32]
      node _io_wb_memory_read_data_T_55 = bits(io.memory_bundle.read_data, 15, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 85:30]
      node _io_wb_memory_read_data_T_56 = cat(UInt<16>("h0"), _io_wb_memory_read_data_T_55) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 85:14]
      node _io_wb_memory_read_data_T_57 = bits(io.memory_bundle.read_data, 31, 16) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 86:30]
      node _io_wb_memory_read_data_T_58 = cat(UInt<16>("h0"), _io_wb_memory_read_data_T_57) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 86:14]
      node _io_wb_memory_read_data_T_59 = mux(_io_wb_memory_read_data_T_54, _io_wb_memory_read_data_T_56, _io_wb_memory_read_data_T_58) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 83:37]
      node _io_wb_memory_read_data_T_60 = eq(UInt<3>("h0"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_61 = mux(_io_wb_memory_read_data_T_60, _io_wb_memory_read_data_T_25, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_62 = eq(UInt<3>("h4"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_63 = mux(_io_wb_memory_read_data_T_62, _io_wb_memory_read_data_T_41, _io_wb_memory_read_data_T_61) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_64 = eq(UInt<3>("h1"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_65 = mux(_io_wb_memory_read_data_T_64, _io_wb_memory_read_data_T_52, _io_wb_memory_read_data_T_63) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_66 = eq(UInt<3>("h5"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_67 = mux(_io_wb_memory_read_data_T_66, _io_wb_memory_read_data_T_59, _io_wb_memory_read_data_T_65) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_68 = eq(UInt<3>("h2"), io.funct3) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      node _io_wb_memory_read_data_T_69 = mux(_io_wb_memory_read_data_T_68, io.memory_bundle.read_data, _io_wb_memory_read_data_T_67) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:56]
      io.wb_memory_read_data <= _io_wb_memory_read_data_T_69 @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 49:28]
    else :
      when io.memory_write_enable : @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 96:38]
        io.memory_bundle.write_data <= io.reg2_data @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 97:38]
        io.memory_bundle.write_enable <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 98:38]
        wire _WIRE_1 : UInt<1>[4] @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 99:48]
        _WIRE_1[0] <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 99:48]
        _WIRE_1[1] <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 99:48]
        _WIRE_1[2] <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 99:48]
        _WIRE_1[3] <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 99:48]
        io.memory_bundle.write_strobe <= _WIRE_1 @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 99:38]
        node _T = eq(io.funct3, UInt<3>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 101:20]
        when _T : @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 101:46]
          io.memory_bundle.write_strobe[mem_address_index] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 105:56]
          node _io_memory_bundle_write_data_T = bits(io.reg2_data, 7, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 107:50]
          node _io_memory_bundle_write_data_T_1 = dshl(mem_address_index, UInt<2>("h3")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 107:101]
          node _io_memory_bundle_write_data_T_2 = dshl(_io_memory_bundle_write_data_T, _io_memory_bundle_write_data_T_1) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 107:79]
          io.memory_bundle.write_data <= _io_memory_bundle_write_data_T_2 @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 107:35]
        else :
          node _T_1 = eq(io.funct3, UInt<3>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 109:26]
          when _T_1 : @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 109:52]
            node _T_2 = bits(mem_address_index, 1, 1) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 111:29]
            node _T_3 = eq(_T_2, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 111:33]
            when _T_3 : @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 111:42]
              io.memory_bundle.write_strobe[0] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 115:44]
              io.memory_bundle.write_strobe[1] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 115:44]
              node _io_memory_bundle_write_data_T_3 = bits(io.reg2_data, 15, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 118:52]
              io.memory_bundle.write_data <= _io_memory_bundle_write_data_T_3 @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 118:37]
            else :
              io.memory_bundle.write_strobe[2] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 126:44]
              io.memory_bundle.write_strobe[3] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 126:44]
              node _io_memory_bundle_write_data_T_4 = bits(io.reg2_data, 15, 0) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 129:52]
              node _io_memory_bundle_write_data_T_5 = shl(_io_memory_bundle_write_data_T_4, 16) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 132:11]
              io.memory_bundle.write_data <= _io_memory_bundle_write_data_T_5 @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 129:37]
          else :
            node _T_4 = eq(io.funct3, UInt<3>("h2")) @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 135:26]
            when _T_4 : @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 135:52]
              io.memory_bundle.write_strobe[0] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 138:42]
              io.memory_bundle.write_strobe[1] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 138:42]
              io.memory_bundle.write_strobe[2] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 138:42]
              io.memory_bundle.write_strobe[3] <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/MemoryAccess.scala 138:42]


  module WriteBack :
    input clock : Clock
    input reset : Reset
    output io : { flip instruction_address : UInt<32>, flip alu_result : UInt<32>, flip memory_read_data : UInt<32>, flip csr_read_data : UInt<32>, flip regs_write_source : UInt<2>, regs_write_data : UInt<32>} @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 23:14]

    node _io_regs_write_data_T = add(io.instruction_address, UInt<32>("h4")) @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 62:72]
    node _io_regs_write_data_T_1 = tail(_io_regs_write_data_T, 1) @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 62:72]
    node _io_regs_write_data_T_2 = eq(UInt<2>("h1"), io.regs_write_source) @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 55:71]
    node _io_regs_write_data_T_3 = mux(_io_regs_write_data_T_2, io.memory_read_data, io.alu_result) @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 55:71]
    node _io_regs_write_data_T_4 = eq(UInt<2>("h2"), io.regs_write_source) @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 55:71]
    node _io_regs_write_data_T_5 = mux(_io_regs_write_data_T_4, io.csr_read_data, _io_regs_write_data_T_3) @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 55:71]
    node _io_regs_write_data_T_6 = eq(UInt<2>("h3"), io.regs_write_source) @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 55:71]
    node _io_regs_write_data_T_7 = mux(_io_regs_write_data_T_6, _io_regs_write_data_T_1, _io_regs_write_data_T_5) @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 55:71]
    io.regs_write_data <= _io_regs_write_data_T_7 @[2-mmio-trap/src/main/scala/riscv/core/WriteBack.scala 55:22]

  module CSR :
    input clock : Clock
    input reset : Reset
    output io : { flip reg_read_address_id : UInt<12>, flip reg_write_enable_id : UInt<1>, flip reg_write_address_id : UInt<12>, flip reg_write_data_ex : UInt<32>, flip debug_reg_read_address : UInt<12>, debug_reg_read_data : UInt<32>, reg_read_data : UInt<32>, flip clint_access_bundle : { flip mstatus : UInt<32>, flip mepc : UInt<32>, flip mcause : UInt<32>, flip mtvec : UInt<32>, flip mie : UInt<32>, mstatus_write_data : UInt<32>, mepc_write_data : UInt<32>, mcause_write_data : UInt<32>, direct_write_enable : UInt<1>}} @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 92:14]

    reg mstatus : UInt<32>, clock with :
      reset => (reset, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 105:25]
    reg mie : UInt<32>, clock with :
      reset => (reset, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 106:25]
    reg mtvec : UInt<32>, clock with :
      reset => (reset, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 107:25]
    reg mscratch : UInt<32>, clock with :
      reset => (reset, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 108:25]
    reg mepc : UInt<32>, clock with :
      reset => (reset, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 109:25]
    reg mcause : UInt<32>, clock with :
      reset => (reset, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 110:25]
    reg cycles : UInt<64>, clock with :
      reset => (reset, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 111:25]
    node _T = bits(cycles, 31, 0) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 138:37]
    node _T_1 = bits(cycles, 63, 32) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 139:37]
    node _cycles_T = add(cycles, UInt<1>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 141:20]
    node _cycles_T_1 = tail(_cycles_T, 1) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 141:20]
    cycles <= _cycles_T_1 @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 141:10]
    node _io_reg_read_data_T = eq(UInt<12>("h300"), io.reg_read_address_id) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_1 = mux(_io_reg_read_data_T, mstatus, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_2 = eq(UInt<12>("h304"), io.reg_read_address_id) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_3 = mux(_io_reg_read_data_T_2, mie, _io_reg_read_data_T_1) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_4 = eq(UInt<12>("h305"), io.reg_read_address_id) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_5 = mux(_io_reg_read_data_T_4, mtvec, _io_reg_read_data_T_3) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_6 = eq(UInt<12>("h340"), io.reg_read_address_id) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_7 = mux(_io_reg_read_data_T_6, mscratch, _io_reg_read_data_T_5) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_8 = eq(UInt<12>("h341"), io.reg_read_address_id) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_9 = mux(_io_reg_read_data_T_8, mepc, _io_reg_read_data_T_7) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_10 = eq(UInt<12>("h342"), io.reg_read_address_id) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_11 = mux(_io_reg_read_data_T_10, mcause, _io_reg_read_data_T_9) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_12 = eq(UInt<12>("hc00"), io.reg_read_address_id) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_13 = mux(_io_reg_read_data_T_12, _T, _io_reg_read_data_T_11) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_14 = eq(UInt<12>("hc80"), io.reg_read_address_id) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    node _io_reg_read_data_T_15 = mux(_io_reg_read_data_T_14, _T_1, _io_reg_read_data_T_13) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:67]
    io.reg_read_data <= _io_reg_read_data_T_15 @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 145:26]
    node _io_debug_reg_read_data_T = eq(UInt<12>("h300"), io.debug_reg_read_address) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_1 = mux(_io_debug_reg_read_data_T, mstatus, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_2 = eq(UInt<12>("h304"), io.debug_reg_read_address) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_3 = mux(_io_debug_reg_read_data_T_2, mie, _io_debug_reg_read_data_T_1) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_4 = eq(UInt<12>("h305"), io.debug_reg_read_address) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_5 = mux(_io_debug_reg_read_data_T_4, mtvec, _io_debug_reg_read_data_T_3) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_6 = eq(UInt<12>("h340"), io.debug_reg_read_address) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_7 = mux(_io_debug_reg_read_data_T_6, mscratch, _io_debug_reg_read_data_T_5) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_8 = eq(UInt<12>("h341"), io.debug_reg_read_address) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_9 = mux(_io_debug_reg_read_data_T_8, mepc, _io_debug_reg_read_data_T_7) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_10 = eq(UInt<12>("h342"), io.debug_reg_read_address) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_11 = mux(_io_debug_reg_read_data_T_10, mcause, _io_debug_reg_read_data_T_9) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_12 = eq(UInt<12>("hc00"), io.debug_reg_read_address) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_13 = mux(_io_debug_reg_read_data_T_12, _T, _io_debug_reg_read_data_T_11) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_14 = eq(UInt<12>("hc80"), io.debug_reg_read_address) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    node _io_debug_reg_read_data_T_15 = mux(_io_debug_reg_read_data_T_14, _T_1, _io_debug_reg_read_data_T_13) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:70]
    io.debug_reg_read_data <= _io_debug_reg_read_data_T_15 @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 146:26]
    io.clint_access_bundle.mstatus <= mstatus @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 149:34]
    io.clint_access_bundle.mtvec <= mtvec @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 150:34]
    io.clint_access_bundle.mcause <= mcause @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 151:34]
    io.clint_access_bundle.mepc <= mepc @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 152:34]
    io.clint_access_bundle.mie <= mie @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 153:34]
    when io.clint_access_bundle.direct_write_enable : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 168:52]
      mstatus <= io.clint_access_bundle.mstatus_write_data @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 171:13]
      mepc <= io.clint_access_bundle.mepc_write_data @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 172:13]
      mcause <= io.clint_access_bundle.mcause_write_data @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 173:13]
    else :
      when io.reg_write_enable_id : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 174:38]
        node _T_2 = eq(io.reg_write_address_id, UInt<12>("h300")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 177:34]
        when _T_2 : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 177:59]
          mstatus <= io.reg_write_data_ex @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 178:15]
        else :
          node _T_3 = eq(io.reg_write_address_id, UInt<12>("h341")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 179:40]
          when _T_3 : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 179:62]
            mepc <= io.reg_write_data_ex @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 180:12]
          else :
            node _T_4 = eq(io.reg_write_address_id, UInt<12>("h342")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 181:40]
            when _T_4 : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 181:64]
              mcause <= io.reg_write_data_ex @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 182:14]
    when io.reg_write_enable_id : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 190:32]
      node _T_5 = eq(io.reg_write_address_id, UInt<12>("h304")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 192:34]
      when _T_5 : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 192:55]
        mie <= io.reg_write_data_ex @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 193:11]
      else :
        node _T_6 = eq(io.reg_write_address_id, UInt<12>("h305")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 194:40]
        when _T_6 : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 194:63]
          mtvec <= io.reg_write_data_ex @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 195:13]
        else :
          node _T_7 = eq(io.reg_write_address_id, UInt<12>("h340")) @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 196:40]
          when _T_7 : @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 196:66]
            mscratch <= io.reg_write_data_ex @[2-mmio-trap/src/main/scala/riscv/core/CSR.scala 197:16]


  module CLINT :
    input clock : Clock
    input reset : Reset
    output io : { flip interrupt_flag : UInt<32>, flip instruction : UInt<32>, flip instruction_address : UInt<32>, flip jump_flag : UInt<1>, flip jump_address : UInt<32>, interrupt_handler_address : UInt<32>, interrupt_assert : UInt<1>, csr_bundle : { flip mstatus : UInt<32>, flip mepc : UInt<32>, flip mcause : UInt<32>, flip mtvec : UInt<32>, flip mie : UInt<32>, mstatus_write_data : UInt<32>, mepc_write_data : UInt<32>, mcause_write_data : UInt<32>, direct_write_enable : UInt<1>}} @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 67:14]

    node interrupt_enable_global = bits(io.csr_bundle.mstatus, 3, 3) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 82:56]
    node interrupt_enable_timer = bits(io.csr_bundle.mie, 7, 7) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 83:52]
    node interrupt_enable_external = bits(io.csr_bundle.mie, 11, 11) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 84:52]
    node _instruction_address_T = add(io.instruction_address, UInt<3>("h4")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 89:28]
    node _instruction_address_T_1 = tail(_instruction_address_T, 1) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 89:28]
    node instruction_address = mux(io.jump_flag, io.jump_address, _instruction_address_T_1) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 86:32]
    node mpie = bits(io.csr_bundle.mstatus, 7, 7) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 91:35]
    node mie = bits(io.csr_bundle.mstatus, 3, 3) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 92:35]
    node _interrupt_source_enabled_T = eq(io.interrupt_flag, UInt<8>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 117:23]
    node interrupt_source_enabled = mux(_interrupt_source_enabled_T, interrupt_enable_timer, interrupt_enable_external) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 116:37]
    node _T = neq(io.interrupt_flag, UInt<8>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 122:26]
    node _T_1 = and(_T, interrupt_enable_global) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 122:49]
    node _T_2 = and(_T_1, interrupt_source_enabled) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 122:76]
    when _T_2 : @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 122:105]
      io.interrupt_assert <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 123:34]
      io.interrupt_handler_address <= io.csr_bundle.mtvec @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 124:34]
      node _io_csr_bundle_mstatus_write_data_T = bits(io.csr_bundle.mstatus, 31, 13) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 134:30]
      node _io_csr_bundle_mstatus_write_data_T_1 = bits(io.csr_bundle.mstatus, 10, 8) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 136:30]
      node _io_csr_bundle_mstatus_write_data_T_2 = bits(io.csr_bundle.mstatus, 6, 4) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 138:30]
      node _io_csr_bundle_mstatus_write_data_T_3 = bits(io.csr_bundle.mstatus, 2, 0) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 140:30]
      node io_csr_bundle_mstatus_write_data_lo_hi = cat(_io_csr_bundle_mstatus_write_data_T_2, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 133:10]
      node io_csr_bundle_mstatus_write_data_lo = cat(io_csr_bundle_mstatus_write_data_lo_hi, _io_csr_bundle_mstatus_write_data_T_3) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 133:10]
      node io_csr_bundle_mstatus_write_data_hi_lo = cat(_io_csr_bundle_mstatus_write_data_T_1, mie) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 133:10]
      node io_csr_bundle_mstatus_write_data_hi_hi = cat(_io_csr_bundle_mstatus_write_data_T, UInt<2>("h3")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 133:10]
      node io_csr_bundle_mstatus_write_data_hi = cat(io_csr_bundle_mstatus_write_data_hi_hi, io_csr_bundle_mstatus_write_data_hi_lo) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 133:10]
      node _io_csr_bundle_mstatus_write_data_T_4 = cat(io_csr_bundle_mstatus_write_data_hi, io_csr_bundle_mstatus_write_data_lo) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 133:10]
      io.csr_bundle.mstatus_write_data <= _io_csr_bundle_mstatus_write_data_T_4 @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 132:38]
      io.csr_bundle.mepc_write_data <= instruction_address @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 142:35]
      node _io_csr_bundle_mcause_write_data_T = eq(UInt<8>("h1"), io.interrupt_flag) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 149:10]
      node _io_csr_bundle_mcause_write_data_T_1 = mux(_io_csr_bundle_mcause_write_data_T, UInt<31>("h7"), UInt<31>("hb")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 149:10]
      node _io_csr_bundle_mcause_write_data_T_2 = cat(UInt<1>("h1"), _io_csr_bundle_mcause_write_data_T_1) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 144:10]
      io.csr_bundle.mcause_write_data <= _io_csr_bundle_mcause_write_data_T_2 @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 143:37]
      io.csr_bundle.direct_write_enable <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 155:39]
    else :
      node _T_3 = eq(io.instruction, UInt<32>("h100073")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 156:29]
      node _T_4 = eq(io.instruction, UInt<32>("h73")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 156:74]
      node _T_5 = or(_T_3, _T_4) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 156:56]
      when _T_5 : @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 156:101]
        io.interrupt_assert <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 157:34]
        io.interrupt_handler_address <= io.csr_bundle.mtvec @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 158:34]
        node _io_csr_bundle_mstatus_write_data_T_5 = bits(io.csr_bundle.mstatus, 31, 13) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 161:30]
        node _io_csr_bundle_mstatus_write_data_T_6 = bits(io.csr_bundle.mstatus, 10, 8) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 163:30]
        node _io_csr_bundle_mstatus_write_data_T_7 = bits(io.csr_bundle.mstatus, 6, 4) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 165:30]
        node _io_csr_bundle_mstatus_write_data_T_8 = bits(io.csr_bundle.mstatus, 2, 0) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 167:30]
        node io_csr_bundle_mstatus_write_data_lo_hi_1 = cat(_io_csr_bundle_mstatus_write_data_T_7, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 160:10]
        node io_csr_bundle_mstatus_write_data_lo_1 = cat(io_csr_bundle_mstatus_write_data_lo_hi_1, _io_csr_bundle_mstatus_write_data_T_8) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 160:10]
        node io_csr_bundle_mstatus_write_data_hi_lo_1 = cat(_io_csr_bundle_mstatus_write_data_T_6, mie) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 160:10]
        node io_csr_bundle_mstatus_write_data_hi_hi_1 = cat(_io_csr_bundle_mstatus_write_data_T_5, UInt<2>("h3")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 160:10]
        node io_csr_bundle_mstatus_write_data_hi_1 = cat(io_csr_bundle_mstatus_write_data_hi_hi_1, io_csr_bundle_mstatus_write_data_hi_lo_1) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 160:10]
        node _io_csr_bundle_mstatus_write_data_T_9 = cat(io_csr_bundle_mstatus_write_data_hi_1, io_csr_bundle_mstatus_write_data_lo_1) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 160:10]
        io.csr_bundle.mstatus_write_data <= _io_csr_bundle_mstatus_write_data_T_9 @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 159:38]
        io.csr_bundle.mepc_write_data <= instruction_address @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 169:35]
        node _io_csr_bundle_mcause_write_data_T_3 = eq(UInt<32>("h100073"), io.instruction) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 172:37]
        node _io_csr_bundle_mcause_write_data_T_4 = mux(_io_csr_bundle_mcause_write_data_T_3, UInt<31>("h3"), UInt<1>("h0")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 172:37]
        node _io_csr_bundle_mcause_write_data_T_5 = eq(UInt<32>("h73"), io.instruction) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 172:37]
        node _io_csr_bundle_mcause_write_data_T_6 = mux(_io_csr_bundle_mcause_write_data_T_5, UInt<31>("hb"), _io_csr_bundle_mcause_write_data_T_4) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 172:37]
        node _io_csr_bundle_mcause_write_data_T_7 = cat(UInt<1>("h0"), _io_csr_bundle_mcause_write_data_T_6) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 170:43]
        io.csr_bundle.mcause_write_data <= _io_csr_bundle_mcause_write_data_T_7 @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 170:37]
        io.csr_bundle.direct_write_enable <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 179:39]
      else :
        node _T_6 = eq(io.instruction, UInt<32>("h30200073")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 197:29]
        when _T_6 : @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 197:55]
          io.interrupt_assert <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 198:34]
          io.interrupt_handler_address <= io.csr_bundle.mepc @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 199:34]
          node _io_csr_bundle_mstatus_write_data_T_10 = bits(io.csr_bundle.mstatus, 31, 13) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 209:30]
          node _io_csr_bundle_mstatus_write_data_T_11 = bits(io.csr_bundle.mstatus, 10, 8) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 211:30]
          node _io_csr_bundle_mstatus_write_data_T_12 = bits(io.csr_bundle.mstatus, 6, 4) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 213:30]
          node _io_csr_bundle_mstatus_write_data_T_13 = bits(io.csr_bundle.mstatus, 2, 0) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 215:30]
          node io_csr_bundle_mstatus_write_data_lo_hi_2 = cat(_io_csr_bundle_mstatus_write_data_T_12, mpie) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 208:10]
          node io_csr_bundle_mstatus_write_data_lo_2 = cat(io_csr_bundle_mstatus_write_data_lo_hi_2, _io_csr_bundle_mstatus_write_data_T_13) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 208:10]
          node io_csr_bundle_mstatus_write_data_hi_lo_2 = cat(_io_csr_bundle_mstatus_write_data_T_11, UInt<1>("h1")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 208:10]
          node io_csr_bundle_mstatus_write_data_hi_hi_2 = cat(_io_csr_bundle_mstatus_write_data_T_10, UInt<2>("h3")) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 208:10]
          node io_csr_bundle_mstatus_write_data_hi_2 = cat(io_csr_bundle_mstatus_write_data_hi_hi_2, io_csr_bundle_mstatus_write_data_hi_lo_2) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 208:10]
          node _io_csr_bundle_mstatus_write_data_T_14 = cat(io_csr_bundle_mstatus_write_data_hi_2, io_csr_bundle_mstatus_write_data_lo_2) @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 208:10]
          io.csr_bundle.mstatus_write_data <= _io_csr_bundle_mstatus_write_data_T_14 @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 207:38]
          io.csr_bundle.mepc_write_data <= io.csr_bundle.mepc @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 217:39]
          io.csr_bundle.mcause_write_data <= io.csr_bundle.mcause @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 218:39]
          io.csr_bundle.direct_write_enable <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 219:39]
        else :
          io.interrupt_assert <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 221:39]
          io.interrupt_handler_address <= io.csr_bundle.mtvec @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 222:39]
          io.csr_bundle.mstatus_write_data <= io.csr_bundle.mstatus @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 223:39]
          io.csr_bundle.mepc_write_data <= io.csr_bundle.mepc @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 224:39]
          io.csr_bundle.mcause_write_data <= io.csr_bundle.mcause @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 225:39]
          io.csr_bundle.direct_write_enable <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/riscv/core/CLINT.scala 226:39]


  module CPU :
    input clock : Clock
    input reset : Reset
    output io : { instruction_address : UInt<32>, flip instruction : UInt<32>, flip instruction_valid : UInt<1>, flip interrupt_flag : UInt<32>, flip memory_bundle : { flip address : UInt<32>, flip write_data : UInt<32>, flip write_enable : UInt<1>, flip write_strobe : UInt<1>[4], read_data : UInt<32>}, deviceSelect : UInt<3>, flip regs_debug_read_address : UInt<5>, regs_debug_read_data : UInt<32>, flip csr_regs_debug_read_address : UInt<12>, csr_regs_debug_read_data : UInt<32>} @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 58:14]

    inst regs of RegisterFile @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 61:26]
    regs.clock <= clock
    regs.reset <= reset
    inst inst_fetch of InstructionFetch @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 62:26]
    inst_fetch.clock <= clock
    inst_fetch.reset <= reset
    inst id of InstructionDecode @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 63:26]
    id.clock <= clock
    id.reset <= reset
    inst ex of Execute @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 64:26]
    ex.clock <= clock
    ex.reset <= reset
    inst mem of MemoryAccess @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 65:26]
    mem.clock <= clock
    mem.reset <= reset
    inst wb of WriteBack @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 66:26]
    wb.clock <= clock
    wb.reset <= reset
    inst csr_regs of CSR @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 69:24]
    csr_regs.clock <= clock
    csr_regs.reset <= reset
    inst clint of CLINT @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 70:24]
    clint.clock <= clock
    clint.reset <= reset
    io.regs_debug_read_data <= regs.io.debug_read_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 72:38]
    io.csr_regs_debug_read_data <= csr_regs.io.debug_reg_read_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 73:38]
    regs.io.debug_read_address <= io.regs_debug_read_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 74:38]
    csr_regs.io.debug_reg_read_address <= io.csr_regs_debug_read_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 75:38]
    node _io_deviceSelect_T = bits(mem.io.memory_bundle.address, 31, 29) @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 78:13]
    io.deviceSelect <= _io_deviceSelect_T @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 77:19]
    inst_fetch.io.jump_address_id <= ex.io.if_jump_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 80:43]
    inst_fetch.io.jump_flag_id <= ex.io.if_jump_flag @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 81:43]
    inst_fetch.io.interrupt_assert <= clint.io.interrupt_assert @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 82:43]
    inst_fetch.io.interrupt_handler_address <= clint.io.interrupt_handler_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 83:43]
    inst_fetch.io.instruction_valid <= io.instruction_valid @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 84:43]
    inst_fetch.io.instruction_read_data <= io.instruction @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 85:43]
    io.instruction_address <= inst_fetch.io.instruction_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 86:43]
    regs.io.write_enable <= id.io.reg_write_enable @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 88:25]
    regs.io.write_address <= id.io.reg_write_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 89:25]
    regs.io.write_data <= wb.io.regs_write_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 90:25]
    regs.io.read_address1 <= id.io.regs_reg1_read_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 91:25]
    regs.io.read_address2 <= id.io.regs_reg2_read_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 92:25]
    id.io.instruction <= inst_fetch.io.instruction @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 94:21]
    csr_regs.io.clint_access_bundle <= clint.io.csr_bundle @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 96:35]
    csr_regs.io.reg_read_address_id <= id.io.csr_reg_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 97:36]
    csr_regs.io.reg_write_data_ex <= ex.io.csr_reg_write_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 98:36]
    csr_regs.io.reg_write_address_id <= id.io.csr_reg_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 99:36]
    csr_regs.io.reg_write_enable_id <= id.io.csr_reg_write_enable @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 100:36]
    ex.io.instruction <= inst_fetch.io.instruction @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 102:29]
    ex.io.instruction_address <= inst_fetch.io.instruction_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 103:29]
    ex.io.reg1_data <= regs.io.read_data1 @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 104:29]
    ex.io.reg2_data <= regs.io.read_data2 @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 105:29]
    ex.io.immediate <= id.io.ex_immediate @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 106:29]
    ex.io.aluop1_source <= id.io.ex_aluop1_source @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 107:29]
    ex.io.aluop2_source <= id.io.ex_aluop2_source @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 108:29]
    ex.io.csr_reg_read_data <= csr_regs.io.reg_read_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 109:29]
    mem.io.alu_result <= ex.io.mem_alu_result @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 111:30]
    mem.io.reg2_data <= regs.io.read_data2 @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 112:30]
    mem.io.memory_read_enable <= id.io.memory_read_enable @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 113:30]
    mem.io.memory_write_enable <= id.io.memory_write_enable @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 114:30]
    node _mem_io_funct3_T = bits(inst_fetch.io.instruction, 14, 12) @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 115:58]
    mem.io.funct3 <= _mem_io_funct3_T @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 115:30]
    node _io_memory_bundle_address_T = bits(mem.io.memory_bundle.address, 28, 0) @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 119:33]
    node _io_memory_bundle_address_T_1 = cat(UInt<3>("h0"), _io_memory_bundle_address_T) @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 117:34]
    io.memory_bundle.address <= _io_memory_bundle_address_T_1 @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 117:28]
    io.memory_bundle.write_enable <= mem.io.memory_bundle.write_enable @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 121:33]
    io.memory_bundle.write_data <= mem.io.memory_bundle.write_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 122:33]
    io.memory_bundle.write_strobe <= mem.io.memory_bundle.write_strobe @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 123:33]
    mem.io.memory_bundle.read_data <= io.memory_bundle.read_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 124:34]
    wb.io.instruction_address <= inst_fetch.io.instruction_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 126:29]
    wb.io.alu_result <= ex.io.mem_alu_result @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 127:29]
    wb.io.memory_read_data <= mem.io.wb_memory_read_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 128:29]
    wb.io.regs_write_source <= id.io.wb_reg_write_source @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 129:29]
    wb.io.csr_read_data <= csr_regs.io.reg_read_data @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 130:29]
    clint.io.instruction <= inst_fetch.io.instruction @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 132:32]
    clint.io.instruction_address <= inst_fetch.io.instruction_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 133:32]
    clint.io.interrupt_flag <= io.interrupt_flag @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 134:32]
    clint.io.jump_flag <= ex.io.if_jump_flag @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 135:32]
    clint.io.jump_address <= ex.io.if_jump_address @[2-mmio-trap/src/main/scala/riscv/core/CPU.scala 136:32]

  extmodule TrueDualPortRAM32 :
    input clka : Clock
    input wea : UInt<1>
    input addra : UInt<13>
    input dina : UInt<32>
    input clkb : Clock
    input addrb : UInt<13>
    output doutb : UInt<32>
    defname = TrueDualPortRAM32
    parameter ADDR_WIDTH = 13
    parameter DEPTH = 6144

  module VGA :
    input clock : Clock
    input reset : Reset
    output io : { bundle : { flip address : UInt<32>, flip write_data : UInt<32>, flip write_enable : UInt<1>, flip write_strobe : UInt<1>[4], read_data : UInt<32>}, flip pixClock : Clock, hsync : UInt<1>, vsync : UInt<1>, rrggbb : UInt<6>, activevideo : UInt<1>, intr : UInt<1>, x_pos : UInt<10>, y_pos : UInt<10>} @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 35:14]

    inst framebuffer of TrueDualPortRAM32 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 80:27]
    reg ctrlReg : UInt<32>, clock with :
      reset => (reset, UInt<32>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 86:30]
    reg intrStatusReg : UInt<32>, clock with :
      reset => (reset, UInt<32>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 87:30]
    reg uploadAddrReg : UInt<32>, clock with :
      reset => (reset, UInt<32>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 88:30]
    reg paletteReg : UInt<6>[16], clock with :
      reset => (UInt<1>("h0"), paletteReg) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 91:23]
    node ctrl_en = bits(ctrlReg, 0, 0) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 94:31]
    node ctrl_blank = bits(ctrlReg, 1, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 95:31]
    node ctrl_swap_req = bits(ctrlReg, 2, 2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 96:31]
    node ctrl_frame_sel = bits(ctrlReg, 7, 4) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 97:31]
    node ctrl_vblank_ie = bits(ctrlReg, 8, 8) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 98:31]
    wire wire_in_vblank : UInt<1> @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 101:29]
    wire wire_curr_frame : UInt<4> @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 102:29]
    node upload_pix_addr = bits(uploadAddrReg, 15, 0) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 107:40]
    node upload_frame = bits(uploadAddrReg, 19, 16) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 108:40]
    node addr = and(io.bundle.address, UInt<8>("hff")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 111:46]
    node addr_id = eq(addr, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 112:33]
    node addr_ctrl = eq(addr, UInt<3>("h4")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 113:33]
    node addr_status = eq(addr, UInt<4>("h8")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 114:33]
    node addr_intr_status = eq(addr, UInt<4>("hc")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 115:33]
    node addr_upload_addr = eq(addr, UInt<5>("h10")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 116:33]
    node addr_stream_data = eq(addr, UInt<5>("h14")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 117:33]
    node _addr_palette_T = geq(addr, UInt<6>("h20")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 118:34]
    node _addr_palette_T_1 = lt(addr, UInt<7>("h60")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 118:54]
    node addr_palette = and(_addr_palette_T, _addr_palette_T_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 118:45]
    node _palette_idx_T = sub(addr, UInt<6>("h20")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 119:34]
    node _palette_idx_T_1 = tail(_palette_idx_T, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 119:34]
    node palette_idx = shr(_palette_idx_T_1, 2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 119:44]
    reg vblank_sync1 : UInt<1>, clock with :
      reset => (UInt<1>("h0"), vblank_sync1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 122:36]
    vblank_sync1 <= wire_in_vblank @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 122:36]
    reg vblank_synced : UInt<1>, clock with :
      reset => (UInt<1>("h0"), vblank_synced) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 123:36]
    vblank_synced <= vblank_sync1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 123:36]
    reg curr_frame_sync1 : UInt, clock with :
      reset => (UInt<1>("h0"), curr_frame_sync1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 124:36]
    curr_frame_sync1 <= wire_curr_frame @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 124:36]
    reg curr_frame_synced : UInt, clock with :
      reset => (UInt<1>("h0"), curr_frame_synced) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 125:36]
    curr_frame_synced <= curr_frame_sync1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 125:36]
    reg vblank_prev : UInt<1>, clock with :
      reset => (UInt<1>("h0"), vblank_prev) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 134:37]
    vblank_prev <= vblank_synced @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 134:37]
    node _vblank_rising_edge_T = eq(vblank_prev, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 135:47]
    node vblank_rising_edge = and(vblank_synced, _vblank_rising_edge_T) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 135:44]
    node _T = and(vblank_rising_edge, ctrl_vblank_ie) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 137:29]
    when _T : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 137:48]
      intrStatusReg <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 138:21]
    node _io_intr_T = neq(intrStatusReg, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 141:31]
    node _io_intr_T_1 = and(_io_intr_T, ctrl_vblank_ie) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 141:40]
    io.intr <= _io_intr_T_1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 141:13]
    node io_bundle_read_data_lo_hi = cat(UInt<1>("h0"), vblank_synced) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 148:22]
    node io_bundle_read_data_lo = cat(io_bundle_read_data_lo_hi, vblank_synced) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 148:22]
    node io_bundle_read_data_hi_hi = cat(UInt<24>("h0"), curr_frame_synced) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 148:22]
    node io_bundle_read_data_hi = cat(io_bundle_read_data_hi_hi, UInt<2>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 148:22]
    node _io_bundle_read_data_T = cat(io_bundle_read_data_hi, io_bundle_read_data_lo) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 148:22]
    node _io_bundle_read_data_T_1 = eq(UInt<1>("h0"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_2 = mux(_io_bundle_read_data_T_1, UInt<31>("h56474131"), UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_3 = eq(UInt<3>("h4"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_4 = mux(_io_bundle_read_data_T_3, ctrlReg, _io_bundle_read_data_T_2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_5 = eq(UInt<4>("h8"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_6 = mux(_io_bundle_read_data_T_5, _io_bundle_read_data_T, _io_bundle_read_data_T_4) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_7 = eq(UInt<4>("hc"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_8 = mux(_io_bundle_read_data_T_7, intrStatusReg, _io_bundle_read_data_T_6) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_9 = eq(UInt<5>("h10"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_10 = mux(_io_bundle_read_data_T_9, uploadAddrReg, _io_bundle_read_data_T_8) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_11 = eq(UInt<6>("h20"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_12 = mux(_io_bundle_read_data_T_11, paletteReg[0], _io_bundle_read_data_T_10) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_13 = eq(UInt<6>("h24"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_14 = mux(_io_bundle_read_data_T_13, paletteReg[1], _io_bundle_read_data_T_12) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_15 = eq(UInt<6>("h28"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_16 = mux(_io_bundle_read_data_T_15, paletteReg[2], _io_bundle_read_data_T_14) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_17 = eq(UInt<6>("h2c"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_18 = mux(_io_bundle_read_data_T_17, paletteReg[3], _io_bundle_read_data_T_16) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_19 = eq(UInt<6>("h30"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_20 = mux(_io_bundle_read_data_T_19, paletteReg[4], _io_bundle_read_data_T_18) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_21 = eq(UInt<6>("h34"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_22 = mux(_io_bundle_read_data_T_21, paletteReg[5], _io_bundle_read_data_T_20) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_23 = eq(UInt<6>("h38"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_24 = mux(_io_bundle_read_data_T_23, paletteReg[6], _io_bundle_read_data_T_22) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_25 = eq(UInt<6>("h3c"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_26 = mux(_io_bundle_read_data_T_25, paletteReg[7], _io_bundle_read_data_T_24) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_27 = eq(UInt<7>("h40"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_28 = mux(_io_bundle_read_data_T_27, paletteReg[8], _io_bundle_read_data_T_26) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_29 = eq(UInt<7>("h44"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_30 = mux(_io_bundle_read_data_T_29, paletteReg[9], _io_bundle_read_data_T_28) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_31 = eq(UInt<7>("h48"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_32 = mux(_io_bundle_read_data_T_31, paletteReg[10], _io_bundle_read_data_T_30) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_33 = eq(UInt<7>("h4c"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_34 = mux(_io_bundle_read_data_T_33, paletteReg[11], _io_bundle_read_data_T_32) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_35 = eq(UInt<7>("h50"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_36 = mux(_io_bundle_read_data_T_35, paletteReg[12], _io_bundle_read_data_T_34) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_37 = eq(UInt<7>("h54"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_38 = mux(_io_bundle_read_data_T_37, paletteReg[13], _io_bundle_read_data_T_36) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_39 = eq(UInt<7>("h58"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_40 = mux(_io_bundle_read_data_T_39, paletteReg[14], _io_bundle_read_data_T_38) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_41 = eq(UInt<7>("h5c"), addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    node _io_bundle_read_data_T_42 = mux(_io_bundle_read_data_T_41, paletteReg[15], _io_bundle_read_data_T_40) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:48]
    io.bundle.read_data <= _io_bundle_read_data_T_42 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 144:25]
    framebuffer.clka <= clock @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 162:25]
    wire fb_write_en : UInt<1> @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 165:36]
    fb_write_en <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 165:36]
    wire fb_write_addr : UInt<13> @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 166:36]
    fb_write_addr <= UInt<13>("h0") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 166:36]
    wire fb_write_data : UInt<32> @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 167:36]
    fb_write_data <= UInt<32>("h0") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 167:36]
    when io.bundle.write_enable : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 170:34]
      when addr_ctrl : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 171:23]
        node requested_frame = bits(io.bundle.write_data, 7, 4) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 174:51]
        node display_enable = bits(io.bundle.write_data, 0, 0) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 175:51]
        node _T_1 = lt(requested_frame, UInt<4>("hc")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 176:30]
        when _T_1 : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 176:38]
          ctrlReg <= io.bundle.write_data @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 177:19]
        else :
          node _ctrlReg_T = bits(ctrlReg, 31, 8) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 180:33]
          node _ctrlReg_T_1 = bits(ctrlReg, 7, 4) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 180:49]
          node _ctrlReg_T_2 = cat(UInt<3>("h0"), display_enable) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 180:60]
          node ctrlReg_hi = cat(_ctrlReg_T, _ctrlReg_T_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 180:25]
          node _ctrlReg_T_3 = cat(ctrlReg_hi, _ctrlReg_T_2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 180:25]
          ctrlReg <= _ctrlReg_T_3 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 180:19]
      else :
        when addr_intr_status : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 182:36]
          node _intrStatusReg_T = not(io.bundle.write_data) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 184:42]
          node _intrStatusReg_T_1 = and(intrStatusReg, _intrStatusReg_T) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 184:40]
          intrStatusReg <= _intrStatusReg_T_1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 184:23]
        else :
          when addr_upload_addr : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 185:36]
            uploadAddrReg <= io.bundle.write_data @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 186:23]
          else :
            when addr_stream_data : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 187:36]
              node word_offset = shr(upload_pix_addr, 3) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 191:51]
              node frame_base = mul(upload_frame, UInt<10>("h200")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 192:46]
              node _fb_addr_T = add(frame_base, word_offset) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 193:44]
              node fb_addr = tail(_fb_addr_T, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 193:44]
              fb_write_en <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 196:23]
              fb_write_addr <= fb_addr @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 197:23]
              fb_write_data <= io.bundle.write_data @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 198:23]
              node _next_addr_T = add(upload_pix_addr, UInt<4>("h8")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 201:44]
              node next_addr = tail(_next_addr_T, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 201:44]
              node _wrapped_addr_T = geq(next_addr, UInt<13>("h1000")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 202:42]
              node wrapped_addr = mux(_wrapped_addr_T, UInt<1>("h0"), next_addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 202:31]
              node _uploadAddrReg_T = cat(upload_frame, wrapped_addr) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 203:29]
              uploadAddrReg <= _uploadAddrReg_T @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 203:23]
            else :
              when addr_palette : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 204:32]
                node _T_2 = bits(palette_idx, 3, 0)
                node _paletteReg_T = bits(io.bundle.write_data, 5, 0) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 205:56]
                paletteReg[_T_2] <= _paletteReg_T @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 205:33]
    framebuffer.wea <= fb_write_en @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 210:26]
    framebuffer.addra <= fb_write_addr @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 211:26]
    framebuffer.dina <= fb_write_data @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 212:26]
    reg h_count : UInt<10>, io.pixClock with :
      reset => (reset, UInt<10>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 218:26]
    reg v_count : UInt<10>, io.pixClock with :
      reset => (reset, UInt<10>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 219:26]
    node _T_3 = eq(h_count, UInt<10>("h33f")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 222:18]
    when _T_3 : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 222:39]
      h_count <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 223:15]
      node _T_4 = eq(v_count, UInt<10>("h207")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 225:20]
      when _T_4 : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 225:41]
        v_count <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 226:17]
      else :
        node _v_count_T = add(v_count, UInt<1>("h1")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 228:28]
        node _v_count_T_1 = tail(_v_count_T, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 228:28]
        v_count <= _v_count_T_1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 228:17]
    else :
      node _h_count_T = add(h_count, UInt<1>("h1")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 231:26]
      node _h_count_T_1 = tail(_h_count_T, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 231:26]
      h_count <= _h_count_T_1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 231:15]
    node _h_sync_pulse_T = geq(h_count, UInt<10>("h298")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 236:33]
    node _h_sync_pulse_T_1 = lt(h_count, UInt<10>("h2c0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 236:69]
    node h_sync_pulse = and(_h_sync_pulse_T, _h_sync_pulse_T_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 236:57]
    node _v_sync_pulse_T = geq(v_count, UInt<9>("h1e9")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 237:33]
    node _v_sync_pulse_T_1 = lt(v_count, UInt<9>("h1ec")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 237:69]
    node v_sync_pulse = and(_v_sync_pulse_T, _v_sync_pulse_T_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 237:57]
    node _hsync_d1_T = eq(h_sync_pulse, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 238:32]
    reg hsync_d1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), hsync_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 238:31]
    hsync_d1 <= _hsync_d1_T @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 238:31]
    node _vsync_d1_T = eq(v_sync_pulse, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 239:32]
    reg vsync_d1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), vsync_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 239:31]
    vsync_d1 <= _vsync_d1_T @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 239:31]
    reg io_hsync_REG : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), io_hsync_REG) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 240:24]
    io_hsync_REG <= hsync_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 240:24]
    io.hsync <= io_hsync_REG @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 240:14]
    reg io_vsync_REG : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), io_vsync_REG) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 241:24]
    io_vsync_REG <= vsync_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 241:24]
    io.vsync <= io_vsync_REG @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 241:14]
    node h_active = lt(h_count, UInt<10>("h280")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 244:28]
    node v_active = lt(v_count, UInt<9>("h1e0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 245:28]
    reg x_px : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), x_px) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 250:23]
    x_px <= h_count @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 250:23]
    reg y_px : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), y_px) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 251:23]
    y_px <= v_count @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 251:23]
    node _in_display_x_T = geq(x_px, UInt<8>("h80")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 254:30]
    node _in_display_x_T_1 = lt(x_px, UInt<10>("h200")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 254:57]
    node in_display_x = and(_in_display_x_T, _in_display_x_T_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 254:48]
    node _in_display_y_T = geq(y_px, UInt<6>("h30")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 255:30]
    node _in_display_y_T_1 = lt(y_px, UInt<9>("h1b0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 255:56]
    node in_display_y = and(_in_display_y_T, _in_display_y_T_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 255:47]
    node in_display = and(in_display_x, in_display_y) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 256:37]
    node _rel_x_T = geq(x_px, UInt<8>("h80")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 260:26]
    node _rel_x_T_1 = sub(x_px, UInt<8>("h80")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 260:49]
    node _rel_x_T_2 = tail(_rel_x_T_1, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 260:49]
    node rel_x = mux(_rel_x_T, _rel_x_T_2, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 260:20]
    node _rel_y_T = geq(y_px, UInt<6>("h30")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 261:26]
    node _rel_y_T_1 = sub(y_px, UInt<6>("h30")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 261:48]
    node _rel_y_T_2 = tail(_rel_y_T_1, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 261:48]
    node rel_y = mux(_rel_y_T, _rel_y_T_2, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 261:20]
    node frame_x_mult = mul(rel_x, UInt<14>("h2aab")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 268:30]
    node frame_x_div = bits(frame_x_mult, 23, 16) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 269:36]
    node frame_y_mult = mul(rel_y, UInt<14>("h2aab")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 270:30]
    node frame_y_div = bits(frame_y_mult, 23, 16) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 271:36]
    node _frame_x_T = geq(frame_x_div, UInt<7>("h40")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 274:35]
    node _frame_x_T_1 = bits(frame_x_div, 5, 0) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 274:85]
    node frame_x = mux(_frame_x_T, UInt<6>("h3f"), _frame_x_T_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 274:22]
    node _frame_y_T = geq(frame_y_div, UInt<7>("h40")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 275:35]
    node _frame_y_T_1 = bits(frame_y_div, 5, 0) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 275:87]
    node frame_y = mux(_frame_y_T, UInt<6>("h3f"), _frame_y_T_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 275:22]
    reg curr_frame_sync1_1 : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), curr_frame_sync1_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 279:35]
    curr_frame_sync1_1 <= ctrl_frame_sel @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 279:35]
    reg curr_frame : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), curr_frame) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 280:35]
    curr_frame <= curr_frame_sync1_1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 280:35]
    reg display_enabled_sync1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), display_enabled_sync1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 282:40]
    display_enabled_sync1 <= ctrl_en @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 282:40]
    reg display_enabled : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), display_enabled) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 283:40]
    display_enabled <= display_enabled_sync1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 283:40]
    reg blanking_sync1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), blanking_sync1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 285:33]
    blanking_sync1 <= ctrl_blank @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 285:33]
    reg blanking : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), blanking) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 286:33]
    blanking <= blanking_sync1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 286:33]
    reg palette_sync1 : UInt<6>[16], io.pixClock with :
      reset => (UInt<1>("h0"), palette_sync1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 290:32]
    palette_sync1 <= paletteReg @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 290:32]
    reg palette_sync : UInt<6>[16], io.pixClock with :
      reset => (UInt<1>("h0"), palette_sync) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 292:31]
    palette_sync <= palette_sync1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 292:31]
    reg frame_x_d1 : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), frame_x_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 297:37]
    frame_x_d1 <= frame_x @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 297:37]
    reg frame_y_d1 : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), frame_y_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 298:37]
    frame_y_d1 <= frame_y @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 298:37]
    reg in_display_d1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), in_display_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 299:37]
    in_display_d1 <= in_display @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 299:37]
    reg in_display_d2 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), in_display_d2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 300:37]
    in_display_d2 <= in_display_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 300:37]
    reg display_enabled_d1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), display_enabled_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 301:37]
    display_enabled_d1 <= display_enabled @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 301:37]
    reg display_enabled_d2 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), display_enabled_d2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 302:37]
    display_enabled_d2 <= display_enabled_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 302:37]
    reg blanking_d1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), blanking_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 303:37]
    blanking_d1 <= blanking @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 303:37]
    reg blanking_d2 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), blanking_d2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 304:37]
    blanking_d2 <= blanking_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 304:37]
    reg h_active_d1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), h_active_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 307:30]
    h_active_d1 <= h_active @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 307:30]
    reg v_active_d1 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), v_active_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 308:30]
    v_active_d1 <= v_active @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 308:30]
    reg h_active_d2 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), h_active_d2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 309:30]
    h_active_d2 <= h_active_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 309:30]
    reg v_active_d2 : UInt<1>, io.pixClock with :
      reset => (UInt<1>("h0"), v_active_d2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 310:30]
    v_active_d2 <= v_active_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 310:30]
    node _pixel_idx_T = mul(frame_y, UInt<7>("h40")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 314:33]
    node _pixel_idx_T_1 = add(_pixel_idx_T, frame_x) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 314:49]
    node pixel_idx = tail(_pixel_idx_T_1, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 314:49]
    node word_offset_1 = shr(pixel_idx, 3) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 315:35]
    node pixel_in_word = bits(pixel_idx, 2, 0) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 316:34]
    node frame_base_1 = mul(curr_frame, UInt<10>("h200")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 317:36]
    node _fb_read_addr_T = add(frame_base_1, word_offset_1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 318:36]
    node fb_read_addr = tail(_fb_read_addr_T, 1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 318:36]
    framebuffer.clkb <= io.pixClock @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 321:26]
    framebuffer.addrb <= fb_read_addr @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 322:26]
    reg pixel_in_word_d1 : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 326:35]
    pixel_in_word_d1 <= pixel_in_word @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 326:35]
    wire pixel_4bit : UInt<4> @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 330:33]
    pixel_4bit <= UInt<4>("h0") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 330:33]
    node _pixel_4bit_T = bits(framebuffer.doutb, 3, 0) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 333:23]
    node _pixel_4bit_T_1 = bits(framebuffer.doutb, 7, 4) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 334:23]
    node _pixel_4bit_T_2 = bits(framebuffer.doutb, 11, 8) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 335:23]
    node _pixel_4bit_T_3 = bits(framebuffer.doutb, 15, 12) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 336:23]
    node _pixel_4bit_T_4 = bits(framebuffer.doutb, 19, 16) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 337:23]
    node _pixel_4bit_T_5 = bits(framebuffer.doutb, 23, 20) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 338:23]
    node _pixel_4bit_T_6 = bits(framebuffer.doutb, 27, 24) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 339:23]
    node _pixel_4bit_T_7 = bits(framebuffer.doutb, 31, 28) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 340:23]
    node _pixel_4bit_T_8 = eq(UInt<1>("h0"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_9 = mux(_pixel_4bit_T_8, _pixel_4bit_T, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_10 = eq(UInt<1>("h1"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_11 = mux(_pixel_4bit_T_10, _pixel_4bit_T_1, _pixel_4bit_T_9) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_12 = eq(UInt<2>("h2"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_13 = mux(_pixel_4bit_T_12, _pixel_4bit_T_2, _pixel_4bit_T_11) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_14 = eq(UInt<2>("h3"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_15 = mux(_pixel_4bit_T_14, _pixel_4bit_T_3, _pixel_4bit_T_13) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_16 = eq(UInt<3>("h4"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_17 = mux(_pixel_4bit_T_16, _pixel_4bit_T_4, _pixel_4bit_T_15) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_18 = eq(UInt<3>("h5"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_19 = mux(_pixel_4bit_T_18, _pixel_4bit_T_5, _pixel_4bit_T_17) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_20 = eq(UInt<3>("h6"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_21 = mux(_pixel_4bit_T_20, _pixel_4bit_T_6, _pixel_4bit_T_19) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_22 = eq(UInt<3>("h7"), pixel_in_word_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    node _pixel_4bit_T_23 = mux(_pixel_4bit_T_22, _pixel_4bit_T_7, _pixel_4bit_T_21) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:51]
    pixel_4bit <= _pixel_4bit_T_23 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 331:16]
    wire output_color : UInt<6> @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 347:35]
    output_color <= UInt<6>("h0") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 347:35]
    when blanking : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 348:20]
      output_color <= UInt<1>("h0") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 349:20]
    else :
      node _T_5 = and(display_enabled, in_display_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 350:32]
      when _T_5 : @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 350:50]
        output_color <= palette_sync[pixel_4bit] @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 351:20]
      else :
        output_color <= UInt<1>("h1") @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 353:20]
    node _io_rrggbb_T = and(h_active_d2, v_active_d2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 357:34]
    node _io_rrggbb_T_1 = mux(_io_rrggbb_T, output_color, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 357:21]
    io.rrggbb <= _io_rrggbb_T_1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 357:15]
    node _io_activevideo_T = and(h_active_d2, v_active_d2) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 360:35]
    io.activevideo <= _io_activevideo_T @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 360:20]
    reg x_px_d1 : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), x_px_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 364:26]
    x_px_d1 <= x_px @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 364:26]
    reg y_px_d1 : UInt, io.pixClock with :
      reset => (UInt<1>("h0"), y_px_d1) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 365:26]
    y_px_d1 <= y_px @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 365:26]
    io.x_pos <= x_px_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 366:14]
    io.y_pos <= y_px_d1 @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 367:14]
    node in_vblank = geq(v_count, UInt<9>("h1e0")) @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 370:29]
    wire_in_vblank <= in_vblank @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 373:21]
    wire_curr_frame <= curr_frame @[2-mmio-trap/src/main/scala/peripheral/VGA.scala 374:21]

  module Top :
    input clock : Clock
    input reset : UInt<1>
    output io : { instruction_address : UInt<32>, flip instruction : UInt<32>, flip instruction_valid : UInt<1>, flip interrupt_flag : UInt<32>, flip memory_bundle : { flip address : UInt<32>, flip write_data : UInt<32>, flip write_enable : UInt<1>, flip write_strobe : UInt<1>[4], read_data : UInt<32>}, deviceSelect : UInt<3>, flip regs_debug_read_address : UInt<5>, regs_debug_read_data : UInt<32>, flip csr_regs_debug_read_address : UInt<12>, csr_regs_debug_read_data : UInt<32>, flip vga_pixclk : Clock, vga_hsync : UInt<1>, vga_vsync : UInt<1>, vga_rrggbb : UInt<6>, vga_activevideo : UInt<1>, vga_x_pos : UInt<10>, vga_y_pos : UInt<10>} @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 26:14]

    inst cpu of CPU @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 28:19]
    cpu.clock <= clock
    cpu.reset <= reset
    inst vga of VGA @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 29:19]
    vga.clock <= clock
    vga.reset <= reset
    cpu.io.regs_debug_read_address <= io.regs_debug_read_address @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 32:38]
    cpu.io.csr_regs_debug_read_address <= io.csr_regs_debug_read_address @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 33:38]
    io.csr_regs_debug_read_data <= cpu.io.csr_regs_debug_read_data @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 34:38]
    io.regs_debug_read_data <= cpu.io.regs_debug_read_data @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 35:38]
    io.deviceSelect <= cpu.io.deviceSelect @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 38:19]
    io.instruction_address <= cpu.io.instruction_address @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 41:28]
    cpu.io.instruction <= io.instruction @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 42:28]
    cpu.io.instruction_valid <= io.instruction_valid @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 43:28]
    cpu.io.interrupt_flag <= io.interrupt_flag @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 44:28]
    io.memory_bundle.address <= cpu.io.memory_bundle.address @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 49:33]
    io.memory_bundle.write_enable <= cpu.io.memory_bundle.write_enable @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 50:33]
    io.memory_bundle.write_data <= cpu.io.memory_bundle.write_data @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 51:33]
    io.memory_bundle.write_strobe <= cpu.io.memory_bundle.write_strobe @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 52:33]
    node _cpu_io_memory_bundle_read_data_T = eq(cpu.io.deviceSelect, UInt<1>("h1")) @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 56:25]
    node _cpu_io_memory_bundle_read_data_T_1 = mux(_cpu_io_memory_bundle_read_data_T, vga.io.bundle.read_data, io.memory_bundle.read_data) @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 55:40]
    cpu.io.memory_bundle.read_data <= _cpu_io_memory_bundle_read_data_T_1 @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 55:34]
    vga.io.pixClock <= io.vga_pixclk @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 62:30]
    io.vga_hsync <= vga.io.hsync @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 63:30]
    io.vga_vsync <= vga.io.vsync @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 64:30]
    io.vga_rrggbb <= vga.io.rrggbb @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 65:30]
    io.vga_activevideo <= vga.io.activevideo @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 66:30]
    io.vga_x_pos <= vga.io.x_pos @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 67:30]
    io.vga_y_pos <= vga.io.y_pos @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 68:30]
    vga.io.bundle.address <= cpu.io.memory_bundle.address @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 71:30]
    vga.io.bundle.write_data <= cpu.io.memory_bundle.write_data @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 72:30]
    vga.io.bundle.write_strobe[0] <= cpu.io.memory_bundle.write_strobe[0] @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 73:30]
    vga.io.bundle.write_strobe[1] <= cpu.io.memory_bundle.write_strobe[1] @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 73:30]
    vga.io.bundle.write_strobe[2] <= cpu.io.memory_bundle.write_strobe[2] @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 73:30]
    vga.io.bundle.write_strobe[3] <= cpu.io.memory_bundle.write_strobe[3] @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 73:30]
    node _vga_io_bundle_write_enable_T = eq(cpu.io.deviceSelect, UInt<1>("h1")) @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 75:25]
    node _vga_io_bundle_write_enable_T_1 = mux(_vga_io_bundle_write_enable_T, cpu.io.memory_bundle.write_enable, UInt<1>("h0")) @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 74:36]
    vga.io.bundle.write_enable <= _vga_io_bundle_write_enable_T_1 @[2-mmio-trap/src/main/scala/board/verilator/Top.scala 74:30]

